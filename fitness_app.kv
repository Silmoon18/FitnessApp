#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import Gradient kivy_gradient.Gradient
#: import TransitionBase kivy.uix.screenmanager.TransitionBase
#: import SlideTransition kivy.uix.screenmanager.SlideTransition
#: import NoTransition kivy.uix.screenmanager.NoTransition
WindowManager: 
    LoadingScreen:
    InitialPage:
    SignupPage:
    LoginPage:
    SelectGender:
    InputAge:
    InputHeightWeight:
    ExperienceLevel:
    InputBodyfat:
    CalculateBodyFat:
    ActivityLevel:
    InputGoal:
    WeightLossOrGainRate:
    DisplayCalories:
    InputEquipment:
    InputTrainingStyle:
    InputTrainingFrequency:
    PrioritizeMuscleGroups:
    Dashboard:
    ExerciseList:
    GeneratePlan:
    Dashboard:
    FoodSearch:
    SelectWorkout:
    ExerciseList:
    EmptyPlan:
    LogWorkout:
    ChatBotScreen:
<RoundedButton>:
    background_color: 0, 0, 0, 0
    radius: [15,]
    canvas.before:
        Color:
            rgba: self.btn_color if self.state == 'normal' else self.btn_color_down
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: self.radius

<DarkRoundedButton@RoundedButton>
    btn_color: [27/255, 24/255, 43/255, 1] 
    btn_color_down: get_color_from_hex("222222")
<DarkRoundedRectangle@RoundedButton>
    btn_color:27/255, 24/255, 43/255, 1
    btn_color_down: get_color_from_hex("222222")
<ContinueButton@RoundedButton>:
    size_hint: .9, .085
    btn_color: [105/255, 0, 188/255, 1]
    btn_color_down: [43/255, 25/255, 151/255, 1]
<Border@RoundedButton>:
    size_hint: .906, .1
    btn_color: 105/255, 0, 188/255, 1
    btn_color_down:get_color_from_hex("222222")
<LightButton@RoundedButton>
    btn_color: [88/255, 65/255, 200/255, 1] 
    btn_color_down: [42/255, 32/255, 87/255, 1]
<SelectableRectangle>:
    selected: False
    on_press: app.root.get_screen('prioritizemusclegroups').border_on_click(self)
<ExerciseItem>:
    height: dp(100)
    RoundedImage:
        source: root.image_source
        size_hint: .215, .843
        pos_hint: {'center_x': 0.15, 'center_y': 0.5}

<RoundedImage>:
    size_hint: self.size_hint_x, self.size_hint_y
    pos_hint: self.pos_hint
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
<SwipeToDeleteItem>:
    size_hint_y: None
    height: dp(50)  
    max_opened_x: "120dp"
    MDCardSwipeLayerBox:
        radius: [dp(10), dp(10), dp(10), dp(10)]
        padding: "8dp"
        MDIconButton:
            icon: "cached"
            pos_hint: {"center_y": .5}
            on_release: 
                root.switch_exercise()
        MDIconButton:
            icon: "trash-can"
            pos_hint: {"center_y": .5}
            on_release: root.remove_item()
    MDCardSwipeFrontBox:
        radius: [dp(10), dp(10), dp(10), dp(10)]
        md_bg_color: 0.05, 0.05, 0.05, 1
        TwoLineAvatarListItem:
            id: content
            text: root.text
            secondary_text: root.secondary_text  # Add this line
            pos_hint: {"center_y": .5}
            _no_ripple_effect: True
            RoundedImage:
                source: root.image_source
                size_hint: .18, .54
                pos_hint: {'center_x': 0.12, 'center_y': .5}
<RoundedRectangle2>:
    background_color: 13/255, 13/255, 13/255, 0
    radius: [23,]
    canvas.before:
        Color:
            rgba: self.btn_color if self.state == 'normal' else self.btn_color_down
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: self.radius
<RoundedRectangle3@Button>:
    background_color: 13/255, 13/255, 13/255, 0
    canvas.before:
        RoundedRectangle:
            texture: Gradient.horizontal(get_color_from_hex("880000"), get_color_from_hex("520047"), get_color_from_hex("020068"))
            size: self.size
            pos: self.pos
            radius: [23,]

<DraggablePanel>:
    canvas.before:
        Color:
            rgba: get_color_from_hex("#141414")
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [15,]

    Image:
        source: "dragicon.png"
        pos_hint: {'center_x': 0.5, 'center_y': 0.96}

    DraggableArea:
        size_hint: 1, None
        height: root.height * 0.1  # Adjust the height as needed
        pos_hint: {'top': 1}
        
<ListBoxlayout@BoxLayout>:
    id: _right_container
    size_hint: None, None
    adaptive_size: True
    pos_hint: {'center_y': 0.5}
    # Position this container on the right side
    x: 370
    canvas.before:
        Color:
            rgba: 1, 0, 1, 0
        Rectangle:
            size: self.size
            pos: self.pos
            
<FoodListItem>:
    ListBoxlayout:
        MDIconButton:
            _no_ripple_effect: True
            id: plusiconright
            icon: "plus-circle"
            icon_size: 22
            pos_hint: {'center_x': .5 , 'center_y': 0.5}
            theme_text_color: "Custom"
            icon_color: get_color_from_hex("#ffffff") if self.state == 'normal' else get_color_from_hex("#767676")

<SavedFoodListItem>:
    ListBoxlayout:
        MDIconButton:
            _no_ripple_effect: True
            id: deleteiconright
            icon: "delete"
            icon_size: 22
            pos_hint: {'center_x': .5 , 'center_y': 0.5}
            theme_text_color: "Custom"
            icon_color: get_color_from_hex("#ffffff") if self.state == 'normal' else get_color_from_hex("#767676")
            

<SwipeToDeleteItem2>:
    size_hint_y: None
    height: dp(50)  
    max_opened_x: "120dp"
    on_release: opened_progress = 1 if opened_progress == 0 else 0
    MDCardSwipeLayerBox:
        radius: [dp(10), dp(10), dp(10), dp(10)]
        padding: "8dp"
        MDIconButton:
            icon: "cached"
            pos_hint: {"center_y": .5}
            on_release: 
                root.switch_exercise()
        MDIconButton:
            icon: "trash-can"
            pos_hint: {"center_y": .5}
            on_release: root.remove_item()


    MDCardSwipeFrontBox:
        radius: [dp(10), dp(10), dp(10), dp(10)]
        md_bg_color: get_color_from_hex("0D0F13")

        MDListItem:
            id: content
            text: root.text
            secondary_text: root.secondary_text  # Add this line
            pos_hint: {"center_y": .5}
            _no_ripple_effect: True

<DarkRoundedRectangle@RoundedButton>
    btn_color: 27/255, 24/255, 43/255, 0.3
    btn_color_down: 27/255, 24/255, 43/255, 0
<ExerciseItem>:
    Image:
        source: root.image_source
        size_hint: .865, .85
        pos_hint: {'center_x': 0.12, 'center_y': 0.5}
        
<ExerciseItemPlan>:
    Image:
        source: root.image_source
        size_hint: .865, .85
        pos_hint: {'center_x': 0.12, 'center_y': 0.5}
    MDCheckbox:
        id: cb
        size_hint: None, None
        size: 30, 30
        pos_hint: {'center_x': 0.9, 'center_y': 0.5}
        _no_ripple_effect: True
        color_active: 1, 1, 1, 1
        color_inactive: 1, 1, 1, 0.5
<CircularProgressBar>
    canvas.before:
        Color:
            rgba: root.before_bar_color
        Line:
            width: root.bar_width
            ellipse: (self.x, self.y, self.width, self.height,0,360)

    canvas.after:

        Color:
            rgba: root.bar_color + [1] 
        Line:
            width: root.bar_width
            ellipse: (self.x, self.y, self.width, self.height,0,root.set_value*3.6)

    MDLabel:
        text: root.text
        font_size: root.width/4
        font_name: "Poppins-Bold.ttf"
        pos_hint: {"center_x":0.5, "center_y":0.5}
        halign: "center"
        color: root.bar_color[:3] + [1]
<BodyweightGraph>:
    MDCard:
        orientation: "vertical"
        size_hint: .92, 1
        radius: [21]  # This will give the rounded corners
        padding: "8dp", "40dp", "8dp", "20dp"
        md_bg_color: get_color_from_hex("0D0F13")  
        BoxLayout:
            orientation: 'vertical'
            size_hint: .95, 1
            pos_hint: {'center_x': 0.5,'center_y': 0.5}
            Graph:
                id: weight_graph
                x_ticks_minor: 0
                y_grid_label: True
                x_grid_label: True
                label_options: {'color': [1, 1, 1, 0.5], 'bold': True, 'font_name': 'Poppins-Medium.ttf'}
                x_grid: True
                y_grid: True
                xmin: 0
                xmax: root.elements
                ymin: root.lowest_weight
                ymax: root.highest_weight
                border_color: [1, 1, 1, 0]
                tick_color: [1, 1, 1, 0.15                                                                                                                                                                               ]  

<NavIconButton>:
    # Set default size and allow for size customization
    size_hint: None, None
    width: 50
    height: 50

<Command>
    size_hint_y: None
    pos_hint: {"right": .98}
    height: self.texture_size[1]
    padding: 12, 10
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgb: get_color_from_hex("#201F1F")
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23, 23, 0, 23]
<Response>
    size_hint_y: None
    pos_hint: {"x": .02}
    height: self.texture_size[1]
    padding: 12, 10
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgb: get_color_from_hex("#6900BC")
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23, 23, 23, 0]
<CustomNavBar>:
    orientation: 'horizontal'
    size_hint_y: None
    height: 60  # Adjust the height of the navigation bar
    padding: 10
    spacing: 10

    NavIconButton:
        icon: 'home'
        on_press: app.root.ids.screen_manager.current = 'screen_1'

    NavIconButton:
        icon: 'nutrition'
        on_press: app.root.ids.screen_manager.current = 'screen_2'

    NavIconButton:
        icon: 'chart-timeline-variant'
        on_press: app.root.ids.screen_manager.current = 'screen_3'

    NavIconButton:
        icon: 'account'
        on_press: app.root.ids.screen_manager.current = 'screen_4'
<NavBar>:
<HorizontalProgressBar>:
    orientation: 'vertical'
    spacing: 10
    size_hint_y: None
    height: self.bar_height + 20

    Label:
        text: root.name
        size_hint_x: None
        width: root.label_width
        font_size: 16
        font_name: "Poppins-Regular.ttf"
        color: get_color_from_hex("9F9F9F")

    MDProgressBar:
        value_normalized: root.value / float(root.max_value)
        size_hint_x: .75
        height: root.bar_height
        back_color: get_color_from_hex("2D2D2D")
        color: root.bar_color

    Label:
        text: f"{root.value}/{root.max_value}g"
        font_name: "Poppins-Medium.ttf"
        font_size: 13
        size_hint_x: None
        color: 1, 1, 1, 1  # White color for the text

<ListCard>:
    size_hint_y: None
    height: dp(60)  
    radius: [dp(10), dp(10), dp(10), dp(10)]
    md_bg_color: get_color_from_hex("151515") if self.state == 'normal' else get_color_from_hex("0D0013")
    on_release: 
        app.root.get_screen('select_workout').opened= True if root.log else None
        app.root.get_screen('select_workout').choose_plan_panel(self.text) if root.log else None
    MDIcon:
        icon: root.icon
        pos_hint: {"center_x":0.25,"center_y": .5}
        theme_text_color: "Custom"
        padding: 20, 0, 0, 0
        text_color: get_color_from_hex("#ffffff")
        _no_ripple_effect: True
    OneLineListItem:
        id: content
        text: root.text
        pos_hint: {"center_x":0.3,"center_y": .45}
        divider_color: 0, 0, 0, 0
        _no_ripple_effect: True
    MDIconButton:
        id:edit_btn
        icon: "pencil"
        pos_hint: {"center_x":0.75,"center_y": .5}
        theme_text_color: "Custom"
        opacity: 1 if root.editable else 0
        text_color: get_color_from_hex("#ffffff")
        _no_ripple_effect: True
        on_release: root.edit_item() if root.editable else None
<SetExercisePlan>:
    size_hint_y: None
    height: dp(100)  
    radius: [dp(10), dp(10), dp(10), dp(10)]
    md_bg_color: get_color_from_hex("0D0F13")
    MDFloatLayout:
        Image:
            source: root.image_source
            size_hint: .765, .75
            pos_hint: {'center_x': 0.13, 'center_y': 0.5}
        OneLineListItem:
            text: root.text
            pos_hint: {'center_x': 0.6, 'center_y': 0.9}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            font_size: 30
            size_hint: .7, 1
            font_name: "Poppins-Bold.ttf"
            _no_ripple_effect: True
        RoundedRectangle2:
            id: reps
            text: root.reps_text
            font_name: "Poppins-SemiBold.ttf"
            size_hint: .3, .35
            pos_hint: {'center_x': 0.44, 'center_y': 0.3}
            radius: [12,]
            btn_color: get_color_from_hex('#292929')
            btn_color_down: 0, 0, 0, 1
        RoundedRectangle2:
            id: sets
            text: root.sets_text
            font_name: "Poppins-SemiBold.ttf"
            size_hint: .3, .35
            pos_hint: {'center_x':0.75, 'center_y': 0.3}
            radius: [12,]
            btn_color: get_color_from_hex('#292929')
            btn_color_down: 0, 0, 0, 1
        SmallerTouchIconButton:
            id: reps_minus
            icon: "menu-left"
            pos_hint: {'center_x': 0.32, 'center_y': 0.3}
            theme_text_color: "Custom"
            icon_size: 40
            text_color: 1, 1, 1, 1 
            on_release: root.change_reps(increment=False)
            _no_ripple_effect: True
        SmallerTouchIconButton:
            id: reps_plus
            icon: "menu-right"
            pos_hint: {'center_x': 0.564, 'center_y': 0.3}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            icon_size: 40
            on_release: root.change_reps(increment=True)
            _no_ripple_effect: True
        SmallerTouchIconButton:
            id: sets_minus
            icon: "menu-left"
            icon_size: 40
            pos_hint: {'center_x': 0.63, 'center_y': 0.3}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            on_release: root.change_sets(increment=False)
            _no_ripple_effect: True
        SmallerTouchIconButton:
            id: sets_plus
            icon: "menu-right"
            icon_size: 40
            pos_hint: {'center_x': 0.874, 'center_y': 0.3}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            on_release: root.change_sets(increment=True)
            _no_ripple_effect: True
        SmallerTouchIconButton:
            id: move_up
            icon: "menu-up"
            pos_hint: {'center_x': 0.96, 'center_y': 0.8}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            on_release: root.move_up()
            _no_ripple_effect: True
        SmallerTouchIconButton:
            id: move_down
            icon: "menu-down"
            pos_hint: {'center_x': 0.96, 'center_y': 0.27}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            on_release: root.move_down()
            _no_ripple_effect: True
<SavePlanItem>:
    size_hint: 1, .055
    MDCard:
        size_hint_y: None
        size_hint_x: 0.9
        height: dp(32)  
        radius: [10,]
        md_bg_color: get_color_from_hex("2E2E2E")
        pos_hint: {'center_x': 0.5,'center_y': 0.5}
        on_release: 
            app.root.get_screen('select_workout').on_log_workout(root.day_number) if self.parent.clickable else None
            app.root.get_screen('select_workout').ids.behind_panel_rec.pos_hint={'center_x': 2.5, 'center_y': 2.5} if self.parent.clickable else None
            app.root.get_screen('select_workout').ids.choose_plan_panel.toggle() if self.parent.clickable else None
        MDLabel:
            text: root.day_number
            font_name: 'Poppins-SemiBold.ttf'
            font_size: 20
            color: 1, 1, 1, 1
            padding: 20, 0, 0, 0
        GridLayout:
            cols: 5
            spacing: '5dp'
            padding: 0, 0, 5, 0
            size_hint: None, None
            width: self.minimum_width
            height: dp(32)
            canvas.before:
                Color:
                    rgba: 0.2, 0.7, 0.4, 0
                Rectangle:
                    size: self.size
                    pos: self.pos
            Image:
                source: root.exercise_images[0] if len(root.exercise_images) > 4 else 'invisiblerec.png'
                size_hint: None, None
                size: dp(32), dp(32)
            Image:
                source: root.exercise_images[1] if len(root.exercise_images) > 4 else 'invisiblerec.png'
                size_hint: None, None
                size: dp(32), dp(32)
            Image:
                source: root.exercise_images[2] if len(root.exercise_images) > 4 else 'invisiblerec.png'
                size_hint: None, None
                size: dp(32), dp(32)
            Image:
                source: root.exercise_images[3] if len(root.exercise_images) > 4 else 'invisiblerec.png'
                size_hint: None, None
                size: dp(32), dp(32)
            Image:
                source: root.exercise_images[4] if len(root.exercise_images) > 4 else 'invisiblerec.png'
                size_hint: None, None
                size: dp(32), dp(32)
    MDLabel: #this text should overlap and align in the center of image with root.exercise_images[4] perfectly
        text: root.count_number
        font_name: 'Poppins-SemiBold.ttf'
        font_size: 18
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 1.368, 'center_y': 0.5}
<SetNumber>:
    id: set_number
    text: "2 reps"
    font_name: 'Poppins-Bold.ttf'
    font_size: 18
    color: 1, 1, 1, 1
    btn_color: 1, 1, 1, 0.1
    btn_color_down: 1, 1, 1, 0.05
    type: "reps"
    radius: [17,]
<ChooseItem@MDFloatLayout>:
    size_hint: 1,1
    pos_hint: {'center_x': 0.5,'center_y': 0.5}
    RoundedRectangle2:
        size_hint: 1,1
        pos_hint: {'center_x': 0.5,'center_y': 0.5}
        btn_color: get_color_from_hex("141414")
        btn_color_down: get_color_from_hex("141414")

    MDTextButton:
        text: "Cancel"
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release: 
            app.root.get_screen('logworkout').on_cancel()
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        color: 105/255, 0, 188/255, 1
    RecycleView:
        id: choose_item_rv
        viewclass: 'SetNumber'
        size_hint: 0.35, 0.9
        pos_hint: {'center_x': 0.5,'center_y': 0.5}
        bar_width: '0dp'
        RecycleBoxLayout:
            default_size: dp(200), dp(50)
            default_size_hint: 1, None
            size_hint_y: None
            spacing: dp(10)
            height: self.minimum_height
            orientation: 'vertical'
<WorkoutImage>:
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    size_hint: None, None
    allow_stretch: True
    size: dp(50), dp(50)
    keep_ratio: True
    source: root.source_image
    opacity: root.opacity
    on_release: 
        app.root.get_screen('logworkout').set_opacity(self)
<FirstRow@MDGridLayout>:
    cols: 5
    size_hint: .9, .04
    spacing: 5
    pos_hint: {'center_x': 0.5, 'center_y': 0.76}
    MDTextButton:
        size_hint_x: 0.125
        text: "#"
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, 0.5
    MDTextButton:
        size_hint_x: 0.25
        text: "KG"
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, 0.5
    MDTextButton:
        size_hint_x: 0.25
        text: "REPS"
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, 0.5
    MDTextButton:
        size_hint_x: 0.25
        text: "10RM"
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, 0.5
    MDTextButton:
        size_hint_x: 0.125
        text: " "
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, 0.5
<WorkoutRow>:
    cols: 5
    size_hint: .9, .04
    spacing:5
    pos_hint: {'center_x': 0.5, 'center_y': 0.71}
    RoundedRectangle2:
        size_hint_x: 0.125
        text: root.set
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, root.opacity
        btn_color: root.btn_color
        btn_color_down: root.btn_color_down
        on_release: 
            app.root.get_screen('logworkout').ids.change_sets.toggle()
            app.root.get_screen('logworkout').ids.behind_panel_rec.pos_hint = {'center_x': 0.5, 'center_y': 0.5}
        radius: [10,]
    RoundedRectangle2:
        size_hint_x: 0.25
        text: root.kg
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, root.opacity
        btn_color: root.btn_color
        btn_color_down: root.btn_color_down
        on_release: 
            app.root.get_screen('logworkout').choose_item(root.set, "weight")
        radius: [10,]
    RoundedRectangle2:
        size_hint_x: 0.25
        text: root.reps
        color: 1, 1, 1, root.opacity
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        btn_color: root.btn_color
        btn_color_down: root.btn_color_down
        on_release: 
            app.root.get_screen('logworkout').choose_item(root.set, "reps")
        radius: [10,]
    MDTextButton:
        size_hint_x: 0.25
        text: root.tenrm
        font_name: 'Poppins-Bold.ttf'
        font_size: 18
        color: 1, 1, 1, root.opacity
    ImageButton:
        source: root.icon
        size_hint_x: 0.125
        opacity: root.icon_opacity
        on_release: app.root.get_screen('logworkout').next_row()
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<LoadingScreen>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDLabel:
        text: 'Loading...'
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        halign: 'center'

<InitialPage>:
    name: "initialpage"
    
    # Background Image
    canvas.before:
        Rectangle:
            source: 'background.jpg'
            pos: self.pos
            size: self.size
            
    # BoxLayout for Buttons
    BoxLayout:
        orientation: "vertical" 
        padding: dp(10) 
        spacing: dp(8) 
        size_hint: None, None 
        size: self.minimum_size 
        pos_hint: {"center_x": 0.24, "center_y": 0.15}
        
        # Get Started Button
        MDRaisedButton:
            text: "Get Started"
            size_hint: 2.5, 1.2
            font_name: "Poppins-Bold.ttf"
            font_size: 20
            md_bg_color: 105/255, 0, 188/255, 1
            on_release:
                root.manager.transition = TransitionBase()
                root.manager.current = "selectgender"
                
        # Sign In Button
        MDRaisedButton:
            text: "Sign In"
            size_hint: 2.5, 1.2
            font_name: "Poppins-Bold.ttf"
            font_size: 20
            md_bg_color: 27/255, 24/255, 43/255, 1
            on_release:
                root.manager.transition = TransitionBase()
                root.manager.current = "login_page"
            
    # Footer Label
    MDLabel:
        text: "By continuing you agree to our terms of service and privacy policy"
        font_name: "Poppins-Light.ttf"
        font_size: 11
        halign: "center"
        pos_hint: {"center_x": 0.5, "center_y": 0.05}
        theme_text_color: "Custom"
        text_color: 1, 1, 1, 1
<SignupPage>
    name: 'signup_page'
    #set the background color of the signup page
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    #create a card for the signup form
    MDCard:
        size_hint: .9, .71
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        padding: "25dp"
        spacing: "20dp"
        md_bg_color: 27/255, 24/255, 43/255, 1
        orientation: "vertical"
        radius: [15,]
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [15,]

    #create a text field for the user to input their name
    MDTextField:
        id: signup_username
        helper_text_mode: "on_error"
        icon_right: "account"
        icon_right_color: app.theme_cls.primary_color
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        size_hint_x: .85
        font_size: "20dp"
        font_name: "Poppins-Medium.ttf"
        color_mode: 'custom'
        line_color_focus: 105/255, 0, 188/255, 1
        write_tab: False
        on_text:
            self.text=self.text.replace(" ","")
            signup_username_hint.opacity = .2 if self.text == "" else 0

    #hint text for the username text field
    Label:
        id: signup_username_hint
        text: "Username"
        font_size: "16dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.195, 'center_y': 0.7}
        size: self.texture_size
        opacity: .2
        height: self.texture_size[1]

    #create a text field for the user to input their email
    MDTextField:
        id: signup_email
        helper_text_mode: "on_error"
        icon_right: "email"
        icon_right_color: app.theme_cls.primary_color
        pos_hint: {'center_x': 0.5, 'center_y': 0.55}
        size_hint_x: .85
        font_size: "20dp"
        font_name: "Poppins-Medium.ttf"
        color_mode: 'custom'
        line_color_focus: 105/255, 0, 188/255, 1
        write_tab: False
        on_text:
            self.text=self.text.replace(" ","")
            signup_email_hint.opacity = .2 if self.text == "" else 0

    #hint text for the email text field
    Label:
        id: signup_email_hint
        text: "Email"
        font_size: "16dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.14, 'center_y': 0.55}
        size: self.texture_size
        opacity: .2
        height: self.texture_size[1]
    #create a text field for the user to input their password
    MDTextField:
        id: signup_password
        helper_text_mode: "on_error"
        icon_right: "eye-off"
        password: True
        icon_right_color: app.theme_cls.primary_color
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
        size_hint_x: .85
        font_size: "20dp"
        font_name: "Poppins-Medium.ttf"
        color_mode: 'custom'
        line_color_focus: 105/255, 0, 188/255, 1
        write_tab: False
        on_text:
            self.text=self.text.replace(" ","")
            signup_password_hint.opacity = .2 if self.text == "" else 0
    #hint text for the password text field
    Label:
        id: signup_password_hint
        text: "Password"
        font_size: "16dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.192, 'center_y': 0.4}
        size: self.texture_size
        opacity: .2
        height: self.texture_size[1]

    #create a checkbox to show the password
    BoxLayout:
        size_hint: .85, None
        height: "30dp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        spacing: "4dp"

        MDCheckbox:
            id: show_signup_pass
            size_hint: None, None
            size: "25dp", "25dp"
            pos_hint: {'center_x': 0.9, 'center_y': 0.5}
            on_active: 
                signup_password.password = not signup_password.password
                signup_password.icon_right = "eye" if signup_password.icon_right == "eye-off" else "eye-off"

        #text for the checkbox to show the password
        MDLabel:
            markup: True
            text: "[ref=Show Password][size=15][font=Poppins-Medium.ttf]Show Password[/font][/size][/ref]"
            size_hint: .85, None
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            theme_text_color: 'Custom'
            text_color: 1, 1, 1, 1
            on_ref_press: 
                show_signup_pass.active = not show_signup_pass.active
    
    #create a button to sign up
    ContinueButton:
        id: signup_button
        markup: True
        size_hint_x: .85
        text: "[font=Poppins-Bold.ttf]Sign In[/font]"
        font_size: "22dp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.2}
        on_release:
            root.change_screen()

    #error text for the signup form
    Label:
        id: signup_error
        text: ""
        font_size: "12dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.1}
        size: self.texture_size

    #add image 
    Image:
        source: "login_icon.png"
        pos_hint: {'center_x': 0.5, 'center_y': 0.85}
        size_hint: 1.3, .15

<LoginPage>
    name: 'login_page'
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    MDCard:
        size_hint: .9, .43
        pos_hint: {'center_x': 0.5, 'center_y': 0.49}
        padding: "25dp"
        spacing: "25dp"
        md_bg_color: 27/255, 24/255, 43/255, 1
        orientation: "vertical"
        radius: [15,]
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [15,]

    MDTextField:
        id: username
        font_size: "20dp"
        font_name: "Poppins-Medium.ttf"
        icon_right: "account"
        color_mode: 'custom'
        line_color_focus: 105/255, 0, 188/255, 1
        helper_text_mode: "on_error"
        icon_right_color: app.theme_cls.primary_color
        pos_hint: {'center_x': 0.5, 'center_y': 0.65}
        size_hint_x: .85
        on_text:
            self.text=self.text.replace(" ","")
            username_hint.opacity = .2 if self.text == "" else 0
        write_tab: False
    Label:
        id:username_hint
        text: "Username"
        font_size: "16dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.195, 'center_y': 0.65}
        size: self.texture_size
        opacity: .2
        height: self.texture_size[1]
    MDTextField:
        id: password
        color_mode: 'custom'
        line_color_focus: 105/255, 0, 188/255, 1
        font_size: "20dp"
        font_name: "Poppins-Medium.ttf"
        password: True
        icon_right: "eye-off"
        icon_right_color: app.theme_cls.primary_color
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint_x: .85
        on_text:
            self.text=self.text.replace(" ","")
            password_hint.opacity = .2 if self.text == "" else 0
        write_tab: False   
    Label:
        id:password_hint
        text: "Password"
        font_size: "16dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.192, 'center_y': 0.5}
        size: self.texture_size
        opacity: .2
        height: self.texture_size[1]    
    BoxLayout:
        size_hint: .85, None
        height: "30dp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.415}
        spacing: "4dp"
        MDCheckbox:
            id: show_pass
            size_hint: None, None
            size: "25dp", "25dp"
            pos_hint: {'center_x': 0.9, 'center_y': 0.5}
            on_press: 
                password.password = False if password.password == True else True
                password.icon_right = "eye" if password.icon_right == "eye-off" else "eye-off"
        MDLabel:
            markup: True
            text: "[ref=Show Password][size=15][font=Poppins-Medium.ttf]Show Password[/font][/size][/ref]"
            size_hint: .85, None
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            theme_text_color: 'Custom'
            text_color: 1, 1, 1, 1
            on_ref_press: 
                password.password = False if password.password == True else True
                show_pass.active = False if show_pass.active == True else True
    BoxLayout:
        size_hint: .85, .085
        pos_hint: {'center_x': 0.5, 'center_y': 0.34}
        spacing: "4dp"
        ContinueButton:
            markup: True
            size_hint: .5, .85
            text: "[font=Poppins-Bold.ttf]Sign In[/font]"
            font_size: "22dp"
            on_release: root.login()
    Label:
        id: error
        text: ""
        font_size: "16dp"
        font_name: "Poppins-Medium.ttf"
        color: 1, 1, 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.24}
        size: self.texture_size
    Image:
        source: "login_icon.png"
        pos_hint: {'center_x': 0.5, 'center_y': 0.72}
        size_hint: 1.3, .13

        
<SelectGender>
    # Screen for selecting user's gender
    name: "selectgender"
    
    # Set the background color to black
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
            
    # Back button
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
            
    # Skip button
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
            
    # Gender selection buttons and labels
    Label:
        text: "What is your gender?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 24
        pos: -59.8, 250

    #box to hold the buttons
    BoxLayout:
        orientation: "horizontal"
        padding: dp(50)
        spacing: dp(10)
        size_hint: 1.15, .37
        pos_hint: {"center_x": 0.50, "center_y": 0.665}
        DarkRoundedButton:
            on_release: 
                root.manager.current = "inputage"
                root.set_gender('male')
        DarkRoundedButton:
            on_release: 
                root.manager.current = "inputage"
                root.set_gender('female')
    MDTextButton:
        id: prefer_not_to_say_btn
        text: "Prefer not to say"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color:105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.54, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputage"
    MDTextButton:
        id: help_btn
        text: "Help"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.49, "x" : 0.06}

    Label:
        text: "Male"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 12
        pos: -97, 115
    MDIcon:
        icon: "male logo.png"
        pos: 127, 530
    Label:
        text: "Female"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 12
        pos: 105, 115
    MDIcon:
        icon: "female logo.png"
        pos: 325, 530
    # App logo
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}


<InputAge>:
    name: "inputage"
    #set the background color of the input age page
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    #back button
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "selectgender"
    #skip button
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    #help button
    MDTextButton:
        id: txt_btn
        text: "Help"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.57, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"

    #label for the age input
    Label:
        text: "How old are you?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos: -103, 250

    #rectangle for the age input
    DarkRoundedRectangle:
        size_hint: .9, .085
        pos_hint: {"center_x": 0.50, "center_y": 0.73}

    # birthday icon
    MDIcon:
        icon: "birthday logo.png"
        pos: 52, 566
        font_size: 42

    #age input text field
    LimitTextInput:
        id: age_input
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        auto_insert_dot: False
        on_text:
            self.readonly = True if len(self.text.strip()) == 2 else False
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        max_text_length: 2
        input_type: 'number'
        input_filter: 'int'
        size_hint_x: 0.9
        size_hint_y: 0.085
        readonly: len(self.text.strip()) >= 2
        pos_hint: {"center_x": 0.50, "center_y": 0.73}
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"

    #label to display eventual errors
    Label:
        id: validage
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 12
        pos_hint: {"center_x": 0.50, "center_y": 0.556}

    #continue button
    ContinueButton:
        on_release: root.validate_age(age_input.text)  # Call validate_age when ContinueButton is pressed
        pos_hint: {"center_x": 0.50, "center_y": 0.63}
    Label:
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.50, "center_y": 0.63}
    #app logo
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}
    
<InputHeightWeight>:
    name: "inputheightweight"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    #back button
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputage"

    #skip button
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"

    #label for the height and weight input
    Label:
        text: "What is your height and weight?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": .452, "center_y": 0.805}

    #this is the rectangle for the height input
    DarkRoundedRectangle:
        size_hint: .6, .085
        pos_hint: {"center_x": 0.348, "center_y": 0.73}

    #rectangle to toggle between cm and ft
    DarkRoundedRectangle: #this is the rectangle to toggle between cm and ft
        size_hint: .28, .085
        pos_hint: {"center_x": 0.81, "center_y": 0.73}
        on_release:
            root.toggle_height_unit()

    #label to display the height unit
    Label:
        id: height_unit
        text: root.height_unit
        color: 166/255, 166/255, 166/255, 1 
        font_name: "Poppins-Black.ttf"
        font_size: 40
        pos_hint: {"center_x": 0.81, "center_y": 0.73}

    #height input text field
    LimitTextInput:
        id: height
        auto_insert_dot: True
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        input_type: 'number'
        input_filter: 'float'
        size_hint_x: 0.6
        size_hint_y: 0.085
        pos_hint: {"center_x": 0.348, "center_y": 0.73}
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"

    #rectangle for the weight input
    DarkRoundedRectangle: #this is the rectangle for the weight input
        size_hint: .6, .085
        pos_hint: {"center_x": 0.348, "center_y": 0.63}

    #weight input text field
    LimitTextInput:
        id: weight
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        on_text:
            if len(self.text) > 3 and '.' not in self.text: self.text = self.text[:-1] + '.' + self.text[-1:]
            self.readonly = True if len(self.text.strip()) == 5 else False
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        input_type: 'number'
        input_filter: 'float'
        size_hint_x: 0.6
        size_hint_y: 0.085
        pos_hint: {"center_x": 0.348, "center_y": 0.63}
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"
        
    #rectangle to toggle between kg and lbs
    DarkRoundedRectangle: # this is the rectangle to toggle between kg and lbs
        size_hint: .28, .085
        pos_hint: {"center_x": 0.81, "center_y": 0.63}
        on_release:
            root.toggle_weight_unit()

    #label to display the weight unit
    Label:
        id:weight_unit
        text: root.weight_unit
        color: 166/255, 166/255, 166/255, 1 
        font_name: "Poppins-Black.ttf"
        font_size: 40
        pos_hint: {"center_x": 0.81, "center_y": 0.63}
    
    #continue button
    ContinueButton:
        on_release: 
            root.output(height.text, weight.text)
            root.manager.transition = TransitionBase()
            if root.invalidhw == False: root.manager.current = "experiencelevel"
            else: root.manager.current = "inputheightweight"
        pos_hint: {"center_x": 0.498, "center_y": 0.53}
    Label:
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.50, "center_y": 0.53}

    #label to display eventual errors
    Label: 
        id: validhw
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.45}

    #help button
    MDTextButton:
        id: txt_btn
        text: "Help"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.42, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    #app logo
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<ExperienceLevel>
    # This is the ExperienceLevel screen
    name: "experiencelevel"
    # Set the background color to black
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    # Back button to navigate to the previous screen
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputheightweight"
    # Skip button to navigate to the initial page
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    # Label to ask the user about their experience level
    Label:
        text: "What is your experience level?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": .452, "center_y": 0.805}
        
    # border for the buttons
    Border:
        id: border 
        pos_hint: {"center_x": 0.498, "center_y": 2}

    # button for the beginner level
    DarkRoundedRectangle:
        size_hint: .9, .095
        pos_hint: {"center_x": 0.498, "center_y": 0.72}
        on_state:
            if self.state == 'down': root.border_on_click(True, False, False, False, False)
    Label:
        text: "Novice"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"top": 1.22}
        halign: "left"
        padding: 0, 0, dp(145), 0
    Label:
        text: ">6 months"
        color: 94/255, 94/255, 92/255, 1 
        font_name: "Poppins-Regular.ttf"
        font_size: 17
        pos_hint: { "center_y": 0.718}
        halign: "left"
        padding: dp(225), 0, 0, 0
    
    #circle
    FloatLayout:
        canvas:
            Color:
                rgba: 219/255, 171/255, 0, 1
            Ellipse:
                size: 45, 45
                pos: 36, 553
    #muscle icon
    MDIcon:
        icon: "muscle logo.png"
        pos: 59, 558
        font_size: 38
    DarkRoundedRectangle:
        size_hint: .9, .095
        pos_hint: {"center_x": 0.498, "center_y": 0.611}
        on_state:
            if self.state == 'down': root.border_on_click(False, True, False, False, False)
    Label:
        text: "Beginner"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"top": 1.111}
        halign: "left"
        padding: 0, 0, dp(127), 0
    Label:
        text: "6 months+"
        color: 94/255, 94/255, 92/255, 1 
        font_name: "Poppins-Regular.ttf"
        font_size: 17
        pos_hint: { "center_y": 0.609}
        halign: "left"
        padding: dp(225), 0, 0, 0
    FloatLayout:
        canvas:
            Color:
                rgba: 0, 207/255, 145/255, 1
            Ellipse:
                size: 45, 45
                pos: 36, 466
    MDIcon:
        icon: "muscle logo.png"
        font_size: 38
        pos: 59, 471
    DarkRoundedRectangle:
        size_hint: .9, .095
        pos_hint: {"center_x": 0.498, "center_y": 0.502} 
        on_state:
            if self.state == 'down': root.border_on_click(False, False, True, False, False)
    Label:
        text: "Intermediate"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"top": 1.002}
        halign: "left"
        padding: 0, 0, dp(87.3), 0
    Label:
        text: "1.5 years+"
        color: 94/255, 94/255, 92/255, 1 
        font_name: "Poppins-Regular.ttf"
        font_size: 17
        pos_hint: { "center_y": 0.498}
        halign: "left"
        padding: dp(230), 0, 0, 0
    FloatLayout:
        canvas:
            Color:
                rgba: 14/255, 158/255, 189/255, 1
            Ellipse:
                size: 45, 45
                pos: 36, 379
    MDIcon:
        icon: "muscle logo.png"
        font_size: 38
        pos: 59, 384
    DarkRoundedRectangle:
        size_hint: .9, .095
        pos_hint: {"center_x": 0.498, "center_y": 0.393}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, True, False)
    Label:
        text: "Advanced"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"top": 0.893}
        halign: "left"
        padding: 0, 0, dp(107.3), 0
    Label:
        text: "3 years+"
        color: 94/255, 94/255, 92/255, 1 
        font_name: "Poppins-Regular.ttf"
        font_size: 17
        pos_hint: { "center_y": 0.389}
        halign: "left"
        padding: dp(235), 0, 0, 0
    FloatLayout:
        canvas:
            Color:
                rgba: 185/255, 4/255, 15/255, 1
            Ellipse:
                size: 45, 45
                pos: 36, 292
    MDIcon:
        icon: "muscle logo.png"
        font_size: 38
        pos: 59, 297
    DarkRoundedRectangle: 
        size_hint: .9, .095
        pos_hint: {"center_x": 0.498, "center_y": 0.284}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, False, True)
    Label:
        text: "Elite"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"top": 0.784}
        halign: "left"
        padding: 0, 0, dp(167.3), 0

    Label:
        text: "5 years+"
        color: 94/255, 94/255, 92/255, 1 
        font_name: "Poppins-Regular.ttf"
        font_size: 17
        pos_hint: { "center_y": 0.28}
        halign: "left"
        padding: dp(235), 0, 0, 0
    FloatLayout:
        canvas:
            Color:
                rgba: 148/255, 0, 160/255, 1
            Ellipse:
                size: 45, 45
                pos: 36, 205
    MDIcon:
        icon: "muscle logo.png"
        font_size: 38
        pos: 59, 210
    
    #label to display errors
    Label:
        id: validexp
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.11}

    #continue button
    ContinueButton:
        pos_hint: {"center_x": 0.498, "center_y": 0.175}
        on_release:
            root.on_continue()
            if root.invalidexp == False: root.manager.current = "inputbodyfat"
            else: root.manager.current = "experiencelevel"

    Label:
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.50, "center_y": 0.175}
    MDTextButton:
        id: txt_btn
        text: "Help"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.12, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<InputBodyfat>:
    name: "inputbodyfat"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1 #black background
        Rectangle:
            pos: self.pos
            size: self.size
    #back button
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "experiencelevel"
    #skip button
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"

    #label for the bodyfat input
    Label:
        text: "Do you know your bodyfat \npercentage?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos: -50, 220

    #rectangle for the bodyfat input
    DarkRoundedRectangle:
        size_hint: .435, .09
        pos_hint: {"center_x": 0.2665, "center_y": 0.66}
    
    Label:
        id: yes
        text: "Yes (type here)"
        color: 1, 1, 1, .4 
        font_name: "Poppins-Semibold.ttf"
        font_size: 18
        pos_hint: {"center_x": 0.2665, "center_y": 0.66}

    # percent sign
    Label:
        id: percent
        text: "%"
        color: 166/255, 166/255, 166/255, 1
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        pos_hint: {"center_x": 0.15, "center_y": 0.66}
        opacity: 0

    #bodyfat input text field
    LimitTextInput:
        id: bodyfat
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        input_type: 'number'
        input_filter: 'float'
        size_hint_x: 0.435
        #add a dot after 2 digits, and limit the input to 5 digits
        on_text:
            if len(self.text) > 2 and '.' not in self.text: self.text = self.text[:2] + '.' + self.text[2:] 
            self.readonly = True if len(self.text.strip()) == 5 else False
        on_focus:
            yes.opacity = 0 if self.focus else 1  # set the opacity of the Label based on the focus of the LimitTextInput
            if self.focus == True: yes.text = ""  # set the text of the Label based on the focus of the LimitTextInput
            if self.focus == True: percent.opacity = 1  # set the text of the Label based on the focus of the LimitTextInput
        size_hint_y: 0.09
        pos_hint: {"center_x": 0.2665, "center_y": 0.66}
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"

    #label to display eventual errors
    Label:
        id: validbf
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.45}
    
    #calculate bodyfat button
    LightButton:
        size_hint: .435, .09
        pos_hint: {"center_x":1-.2665, "center_y": 0.66}
        on_release:
            root.manager.current = "calculatebodyfat"
            root.manager.transition = TransitionBase()
            app.root.get_screen('calculatebodyfat').calculatebf(False)
    Label:
        text: "Calculate it"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        font_size: 20
        pos_hint: {"center_x": 1-0.2665, "center_y": 0.66}

    #continue button
    ContinueButton:
        pos_hint: {"center_x": 0.5, "center_y": 0.55}
        on_release:
            root.validbodyfat(bodyfat.text)
            if root.invalidbf == True: root.manager.current = "inputbodyfat"
            else: root.manager.current = "activitylevel"
    Label:
        text: "Continue"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.55}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

    #help button
    MDTextButton:
        id: txt_btn
        text: "Help"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.42, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"

<CalculateBodyFat>
    name: "calculatebodyfat"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputbodyfat"
    Label:
        id: neckcircumference
        text: "What is your neck circumference?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 20
        pos_hint: {"center_x": .452, "center_y": 0.805}
    DarkRoundedRectangle: #this is the rectangle for the neck input
        id: neckinputrectangle
        size_hint: .6, .085
        pos_hint: {"center_x": 0.348, "center_y": 0.73}
        on_state:
    DarkRoundedRectangle: #this is the rectangle to toggle between cm and inches
        id: neckunitrectangle
        size_hint: .28, .085
        pos_hint: {"center_x": 0.81, "center_y": 0.73}
        #:set metric_n True
        on_state:
            if self.state == 'down': metric_n = not metric_n
            if metric_n == False: neckunit.text = "in"
            else: neckunit.text = "cm"

    #label to display the neck unit
    Label:
        id: neckunit
        text: "cm" 
        color: 166/255, 166/255, 166/255, 1 
        font_name: "Poppins-Black.ttf"
        font_size: 40
        pos_hint: {"center_x": 0.81, "center_y": 0.73}

    #neck input text field
    LimitTextInput:
        id: neck
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        on_text:
            if len(self.text) > 2 and '.' not in self.text: self.text = self.text[:-1] + '.' + self.text[-1:]
            self.readonly = True if len(self.text.strip()) == 4 else False
        input_type: 'number'
        input_filter: 'float'
        size_hint_x: 0.6
        size_hint_y: 0.085
        pos_hint: {"center_x": 0.348, "center_y": 0.73}
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"
    Label:
        id:waistcircumference
        text: "What is your waist circumference?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 20
        pos_hint: {"center_x": .452, "center_y": 0.659}
    DarkRoundedRectangle: #this is the waist input
        id: waistinputrectangle
        size_hint: .6, .085
        pos_hint: {"center_x": 0.348, "center_y": 0.584}
    DarkRoundedRectangle: #this is the rectangle to toggle between cm and inches
        id: waistunitrectangle
        size_hint: .28, .085
        pos_hint: {"center_x": 0.81, "center_y": 0.584}
        #:set metric_waist True
        on_state:
            if self.state == 'down': metric_waist = not metric_waist
            if metric_waist == False: waistunit.text = "in"
            else: waistunit.text = "cm"
    Label:
        id: waistunit
        text: "cm" 
        color: 166/255, 166/255, 166/255, 1 
        font_name: "Poppins-Black.ttf"
        font_size: 40
        pos_hint: {"center_x": 0.81, "center_y": 0.584}
    LimitTextInput:
        id: waist
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        on_text:
            if len(self.text) > 3 and '.' not in self.text: self.text = self.text[:-1] + '.' + self.text[-1:]
            self.readonly = True if len(self.text.strip()) == 5 else False
        input_type: 'number'
        input_filter: 'float'
        size_hint_x: 0.6
        size_hint_y: 0.085
        pos_hint: {"center_x": 0.348, "center_y": 0.584}
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"
    Label:
        id: hipcircumference
        text: "What is your hip circumference?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 20
        pos_hint: {"center_x": .43, "center_y": 2} 
        #default position is out of the screen,
        #it will be changed in the .py file if the user is a woman
    
    #this is the rectangle for the hip input
    DarkRoundedRectangle:
        id: hipinputrectangle
        size_hint: .6, .085
        pos_hint: {"center_x": 0.348, "center_y": 2} #out of the screen

    #this is the rectangle to toggle between cm and inches
    DarkRoundedRectangle: 
        id: hipunitrectangle
        size_hint: .28, .085
        pos_hint: {"center_x": 0.81, "center_y": 2}
        #:set metric_hip True
        on_state:
            if self.state == 'down': metric_hip = not metric_hip
            if metric_hip == False: hipunit.text = "in"
            else: hipunit.text = "cm"
    Label:
        id: hipunit
        text: "cm" 
        color: 166/255, 166/255, 166/255, 1 
        font_name: "Poppins-Black.ttf"
        font_size: 40
        pos_hint: {"center_x": 0.81, "center_y": 2} #out of the screen
    LimitTextInput:
        id: hip
        font_name: "Poppins-Bold.ttf"
        font_size: 40
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        on_text:
            if len(self.text) > 3 and '.' not in self.text: self.text = self.text[:-1] + '.' + self.text[-1:]
            self.readonly = True if len(self.text.strip()) == 5 else False
        input_type: 'number'
        input_filter: 'float'
        size_hint_x: 0.6
        size_hint_y: 0.085
        pos_hint: {"center_x": 0.345, "center_y": 2}  #out of the screen
        padding: [0, (self.height - self.line_height) / 2, 10, 5]
        base_direction: "rtl"
    
    #rectangle for the calculate button
    LightButton:
        id:calculaterectangle
        size_hint: .9, .085
        pos_hint: {"center_x": 0.498, "center_y": 0.475}
        on_release:
            root.calculatebf(True)
            
    Label:
        id: calculate
        text: "Calculate"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.50, "center_y": 0.475}
    
    #label to display eventual errors
    Label:
        id: validnhw
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.42}
    DarkRoundedRectangle:
        id: bf_rectangle
        size_hint: .9, .2
        pos_hint: {"center_x": 0.498, "center_y": 0.3}
        opacity: 0 #default opacity is 0, it will be changed in the .py file
    Label:
        id: estimate_text
        text: "YOUR ESTIMATED BODYFAT PERCENTAGE IS:"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.498, "center_y": 0.37}
        opacity: 0
    Label:
        id: bodyfat_percent
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        font_size: 90
        pos_hint: {"center_x": 0.498, "center_y": 0.285}
    ContinueButton:
        id: bf_continue
        pos_hint: {"center_x": 0.498, "center_y": 2}
        on_release:
            root.manager.current = "activitylevel"
    Label: 
        id: bf_continue_text
        text: "Continue"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.14}
        opacity:0
    
    #button if the user can't take their measurements
    MDTextButton:
        id: no_measurement
        text: "I can't take my measurements right now"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1
        pos_hint: {"top" : 0.41, "x" : 0.06}
        on_release:
            root.no_measurement=True
            root.calculatebf(True)
            root.manager.transition = TransitionBase()
            root.manager.current = "activitylevel"
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<ActivityLevel>
    name: "activitylevel"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputbodyfat"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    Label:
        text: "What is your activity level?"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos: -50, 220
        #setting pressed to false of each button, for the border to move if it becomes true
        #: set pressed_sedentary False
        #: set pressed_light False
        #: set pressed_moderate False
        #: set pressed_active False
        #: set pressed_very_active False
        #: set pressed_extra_active False
    Border:
        id: border 
        size_hint: .906, .0775
        pos_hint: {"center_x": 0.498, "center_y": 2} #out of the screen, it will be changed in the .py file
    DarkRoundedRectangle:
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.7}
        on_state:
        #border moves if the button is pressed
            if self.state == 'down': root.border_on_click(True, False, False, False, False,False)
    DarkRoundedRectangle:
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.6162}
        on_state:
            if self.state == 'down': root.border_on_click(False, True, False, False, False, False)
    DarkRoundedRectangle:
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.5324}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, True, False, False, False)
    DarkRoundedRectangle:
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.4486}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, True, False, False)
    DarkRoundedRectangle:
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.3648}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, False, True, False)
    DarkRoundedRectangle:
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.281}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, False, False, True)
    
    #box layout for the activity level labels
    GridLayout:
        cols: 2
        size_hint_y: 1
        padding: 42, 202.8
        pos_hint: {"center_x": 0.5, "center_y": 0.491}
        spacing: 5
        canvas.before:

        Label:
            canvas.before:
            text: "Sedentary"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22.5
            halign: "left"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            canvas.before:
            text: "Little to no exercise"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            valign: 'top'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'

        Label:
            canvas.before:
            text: "Light"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22.5
            halign: "left"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'

        Label:
            canvas.before:
            text: "Exercise 1-3 times a week"
            color: 94/255, 97/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
            

        Label:
            text: "Moderate"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22.5
            halign: "left"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            text: "exercise 4-5 times a week"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            text: "Active"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22.5
            halign: "left"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            canvas.before:
            text: "intense exercise 1-3 times\na week or daily exercise"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            canvas.before:
            text: "Very Active"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22.5
            halign: "left"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            canvas.before:
            text: "intense exercise\n6-7 times a week"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            canvas.before:
            text: "Extra Active"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22.5
            halign: "left"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
        Label:
            canvas.before:
            text: "very intense exercise daily\nand physical job"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            valign: 'middle'
    #button to continue
    ContinueButton:
        id: continuebutton
        pos_hint: {"center_x": 0.498, "center_y": 0.19}
        on_release:
            root.on_continue()
            app.root.get_screen('inputgoal').set_recommendation()
            if root.invalidact == True: root.manager.current = "activitylevel"
            else: root.manager.current = "inputgoal"
    Label:
        id: continue
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.19}
        
    #label to display eventual errors
    Label:
        id: validal
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.14}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<InputGoal>
    name: "inputgoal"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "activitylevel"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    BoxLayout:
        id:boxlayout
        orientation: "vertical"
        size_hint: .9, .075
        pos_hint: {"center_x": .498, "center_y": 0.72+.05}
        padding: 5
        Label:
            text: "What is your goal?"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 22
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            #: set pressed_loseweight False
            #: set pressed_maintainweight False
            #: set pressed_gainweight False
    #border for the buttons
    Border:
        id: border 
        size_hint: .906, .114
        pos_hint: {"center_x": 0.498, "center_y": 2}
    DarkRoundedRectangle:
        id: loseweight
        size_hint: .9, .111
        pos_hint: {"center_x": 0.498, "center_y": 0.612+.05}
        on_state:
            if self.state == 'down': root.border_on_click(True, False, False)
    DarkRoundedRectangle:
        id: maintainweight
        size_hint: .9, .111
        pos_hint: {"center_x": 0.498, "center_y": 0.487+.05}
        on_state:
            if self.state == 'down': root.border_on_click(False, True, False)
    DarkRoundedRectangle:
        id: gainweight
        size_hint: .9, .111
        pos_hint: {"center_x": 0.498, "center_y": 0.362+.05}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, True)
    #box layout for the goal labels
    GridLayout:
        cols: 2
        size_hint_y: 1
        padding: 42, 250
        pos_hint: {"center_x": 0.5, "center_y": 0.491+.05}

        Label:
            id: loseweighttext
            text: "Lose Weight"
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 26
            halign: "left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            size_hint_x: None
            width: 170
        Label:     
            id: loseweightsubtitle 
            text: "Lose fat and build muscle"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            line_height:0.8
            font_size: 13
            halign: "right"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size

        Label:      
            id: maintainweighttext 
            text: "Maintain Weight"
            color: 1, 1, 1, 1 
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 26
            halign: "left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size

        Label:
            id: maintainweightsubtitle  
            text: "Maintain weight and build muscle"
            line_height:0.8
            color: 94/255, 97/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            font_size: 13
            halign: "right"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: gainweighttext        
            text: "Gain Weight"
            color: 1, 1, 1, 1 
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 26
            halign: "left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: gainweightsubtitle            
            text: "Gain muscle and increase weight"
            color: 94/255, 94/255, 92/255, 1
            font_name: "Poppins-Regular.ttf"
            line_height:0.8
            font_size: 13
            halign: "right"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size

    BoxLayout:
        orientation: "vertical"
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.33}
        padding: 5
        #label to display the recommended goal
        Label:
            id: recommendedgoal
            text: ""
            color: 1, 1, 1, .4
            font_name: "Poppins-Medium.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 15
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            pos_hint: {"center_x": 0.50, "center_y": 0.33}
    #button to continue
    ContinueButton:
        id: continuebutton_goal
        pos_hint: {"center_x": 0.498, "center_y": 0.265}
        on_release:
            root.on_continue()
            root.changescreen()

    Label:
        id: continue_goal
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.265}

    #label to display eventual errors
    Label:
        id: validgoal
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.2}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}
    

<WeightLossOrGainRate>
    name: "weightlossorgainrate"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    
    #back and skip buttons
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputgoal"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    
    #label to display the question
    BoxLayout:
        id:boxlayout_2
        orientation: "vertical"
        size_hint: .87, .1
        pos_hint: {"center_x": .498, "center_y": 0.785}
        Label:
            id: rate_of_loss_or_gain
            text: "What's the rate of fat loss you'd like to follow?"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 20
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            #: set pressed_r1 False
            #: set pressed_r2 False
            #: set pressed_r3 False
            #: set pressed_r4 False
    Border:
        id: border 
        size_hint: .906, .1
        pos_hint: {"center_x": 0.498, "center_y": 2}
    DarkRoundedRectangle:
        id: rectangle_1
        size_hint: .9, .097
        pos_hint: {"center_x": 0.498, "center_y": 0.662}
        on_state:
            if self.state == 'down': root.border_on_click(True, False, False, False)
    DarkRoundedRectangle:
        id: rectangle_2
        size_hint: .9, .097
        pos_hint: {"center_x": 0.498, "center_y": 0.553}
        on_state:
            if self.state == 'down': root.border_on_click(False, True, False, False)
    DarkRoundedRectangle:
        id: rectangle_3
        size_hint: .9, .097
        pos_hint: {"center_x": 0.498, "center_y": 0.444}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, True, False)
    DarkRoundedRectangle:
        id: rectangle_4
        size_hint: .9, .097
        pos_hint: {"center_x": 0.498, "center_y": 0.335}
        on_release:
            root.border_on_click(False, False, False, True)
    BoxLayout:
        orientation: "vertical"
        size_hint: .84, .433
        pos_hint: {"center_x": 0.498, "center_y": 0.5}
        padding: 0
        Label:
            text: "0.25 kg per week"
            color: 1, 1, 1, 1 
            font_name: "Poppins-Bold.ttf"
            font_size: 25
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            text: "0.5 kg per week"
            color: 1, 1, 1, 1 
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 25
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            text: "0.75 kg per week"
            valign: 'middle'
            color: 1, 1, 1, 1 
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 25
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            text: "1 kg per week"
            valign: 'middle'
            color: 1, 1, 1, 1 
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 25
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    BoxLayout:
        orientation: "vertical"
        size_hint: .9, .075
        pos_hint: {"center_x": 0.498, "center_y": 0.27}
        padding: 5
        Label:
            id: recommendedrate
            text: "Losing 0.25kg per week is recommended for you"
            color: 1, 1, 1, .4
            font_name: "Poppins-Medium.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 15
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    ContinueButton:
        id: continuebutton_rate
        pos_hint: {"center_x": 0.498, "center_y": 0.21}
        on_release:
            app.root.get_screen('displaycalories').calories()
            if root.invalidrate == False: root.manager.current = "displaycalories"
            else: root.manager.current = "weightlossorgainrate"
    Label:
        id: continue_rate
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.21}
    Label:
        id: validrate
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.15}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<DisplayCalories>
    name: "displaycalories"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "weightlossorgainrate"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    BoxLayout:
        id:boxlayout_3
        orientation: "vertical"
        size_hint: .88, .075
        pos_hint: {"center_x": .498, "center_y": 0.785}
        Label:
            id: displaycalories
            text: "Your daily calorie target is:"
            color: 1, 1, 1, 1 
            font_name: "Poppins-ExtraBold.ttf"
            font_size: 22
            halign:"left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    DarkRoundedRectangle:
        id: rectangle
        size_hint: .9, .22
        pos_hint: {"center_x": 0.498, "center_y": 0.64}
    #label to display the calories
    Label:
        id: calories
        text: ""
        color: 1, 1, 1, 1 
        font_name: "Poppins-ExtraBold.ttf"
        font_size: 90
        pos_hint: {"center_x": 0.498, "center_y": 0.68}
    Label:
        id: caloriesunit
        text: "calories"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 50
        pos_hint: {"center_x": 0.498, "center_y": 0.58}
    ContinueButton:
        id: continuebutton_calories
        pos_hint: {"center_x": 0.498, "center_y": 0.47}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputequipment"
    Label:
        id: continue_calories
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.47}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<InputEquipment>
    name: "inputequipment"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "displaycalories"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    BoxLayout:
        id:boxlayout_4
        orientation: "vertical"
        size_hint: .885, .075
        pos_hint: {"center_x": .498, "center_y": 0.785}
        Label:
            id: equipment
            text: "What type of equipment do you have access to?"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            font_size: 22
            halign:"left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            #: set pressed_minimalequipment False
            #: set pressed_gym False
    Border:
        id: border 
        size_hint: .906, .173
        pos_hint: {"center_x": 0.498, "center_y": 2}
    DarkRoundedRectangle:
        id: rec
        size_hint: .9, .17
        pos_hint: {"center_x": 0.498, "center_y": 0.63}
        on_state:
            if self.state == 'down': root.border_on_click(True, False)
    DarkRoundedRectangle:
        id: rec2
        size_hint: .9, .17
        pos_hint: {"center_x": 0.498, "center_y": 0.44}
        on_state:
            if self.state == 'down': root.border_on_click(False, True)
    MDIcon:
        id: pullup
        icon: "home.png"
        font_size: 120
        pos_hint: {"center_x": 0.2, "center_y": 0.63}
    MDIcon:
        id: gym
        icon: "gym.png"
        font_size: 120
        pos_hint: {"center_x": 0.2, "center_y": 0.44}
    BoxLayout:
        orientation: "vertical"
        size_hint: .4, .39
        pos_hint: {"center_x": 0.54, "center_y": 0.55}
        padding: 5
        Label:
            id: minimal
            text: "Minimal equipment"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 16
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: gymaccess
            text: "A gym"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 16
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    BoxLayout:
        orientation: "vertical"
        size_hint: .6, .39
        pos_hint: {"center_x": 0.642, "center_y": 0.525}
        padding: 5
        Label:
            id: minimal
            text: "Mainly Callisthenics "
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 15
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: gymaccess
            text: "Mainly machines and weights "
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 15
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    Label:
        id: validequipment
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.238}
    ContinueButton:
        id: continuebutton_equipment
        pos_hint: {"center_x": 0.498, "center_y": 0.3}
        on_release:
            root.on_continue()
            root.changescreen()
    Label:
        id: continue_equipment
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.3}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}
<Dashboard>
    name: "dashboard"
    MDFloatLayout:
        md_bg_color: 12/255, 14/255, 18/255, 1
        ScreenManager:
            id : scr
            transition: NoTransition()

            MDScreen:
                id : scr1
                md_bg_color: 0, 0, 0, 1 #12/255, 14/255, 18/255, 1
                name: "home"

                Image:
                    id: dashboard_image
                    source: "dashboard image.png"
                    size_hint: 1, 1
                    pos_hint: {"center_x": .5, "center_y": .8}
                    size_hint: None, None
                    size: 400, 400
                    pos_hint: {"center_x": .498, "center_y": 2} #.7

                BoxLayout:
                    id: box
                    orientation: "vertical"
                    size_hint: .87, .3
                    pos_hint: {"center_x": .52, "center_y": 2} #.56
                    Label:
                        text: "Get Started with a custom generated workout plan"
                        font_size: 18
                        color: 1, 1, 1, 1
                        halign:"left"
                        font_name: "Poppins-Bold"
                        valign: 'middle'
                        width: self.texture_size[0]
                        height: self.texture_size[1]
                        text_size: self.size
                #calendar widget that i made myself, used to see which days the user has worked out
                CalendarWidget:
                    id: calendar
                    pos_hint: {"center_x": .53, "center_y": .3}
                    size_hint: 1, None
                    height: 400
                
                ContinueButton:
                    id: generate_button
                    markup : True   
                    text: "[size=22][font=Poppins-Bold.ttf]Generate Plan[/font][/size]"
                    pos_hint: {"center_x": 0.5, "center_y": 2} #.42
                    on_release: root.generate_button_clicked(True)
                BoxLayout:
                    id: card_text
                    size_hint: .9, .18
                    orientation: "vertical"
                    pos_hint: {'center_x': 0.5, 'center_y': .62}
                    canvas.before:
                        RoundedRectangle:
                            texture: Gradient.horizontal(get_color_from_hex("00045E"), get_color_from_hex("34024B"))
                            pos: self.pos
                            size: self.size
                            radius: [15,]
                    MDLabel:
                        id: big_text
                        padding: "25dp", 70, 0, 0
                        line_height: 0.8
                        text: "Start\nWorkout"
                        font_size: 40
                        color: 1, 1, 1, 1
                        halign:"left"
                        font_name: "Poppins-SemiBold"
                        #width: self.texture_size[0]
                    MDLabel:
                        id: completed
                        padding: "27dp", 0, 0, 0
                        text: "0/6 Complete"
                        font_size: 16
                        color: 1, 1, 1, 1
                        halign:"left"
                        font_name: "Poppins-Regular"
                Image:
                    id: workout_image
                    source: "bolt.png"
                    size_hint: .14, .14
                    pos_hint: {"center_x": .75, "center_y": .615}
                Label:
                    text: "Welcome\nBack!"
                    font_size: 65
                    line_height: 0.8
                    color: 1, 1, 1, 1
                    halign:"left"
                    font_name: "Poppins-ExtraBold.ttf"
                    pos_hint: {"center_x": .418, "center_y": .82}
                    size: self.texture_size
                RoundedRectangle2:
                    id: card
                    size_hint: .9, .18
                    orientation: "vertical"
                    btn_color: 0, 0, 0, 0
                    btn_color_down: 0, 0, 0, 0
                    pos_hint: {'center_x': 0.5, 'center_y': .62}
                    on_release:
                        root.manager.transition = TransitionBase() 
                        root.manager.current = "select_workout"
                MDFloatLayout:
                    md_bg_color: 2 / 255, 15 / 255, 89 / 255, .1
                    CircularProgressBar:
                        id: workout_progress_bar
                        size_hint:None, None
                        size: 90, 90
                        pos_hint: {"center_x":0.75, "center_y":0.62}
                        value: 69
                BoxLayout:
                    id: card_generate_plan
                    size_hint: .9, .12
                    pos_hint: {'center_x': 0.5, 'center_y': .45}
                    orientation: "vertical"
                    canvas.before:
                        RoundedRectangle:
                            texture: Gradient.horizontal(get_color_from_hex("880000"), get_color_from_hex("520047"), get_color_from_hex("020068"))
                            size: self.size
                            pos: self.pos
                            radius: [15,]
                BoxLayout:
                    id: card2
                    size_hint: .887, .114
                    pos_hint: {'center_x': 0.5, 'center_y': .45}
                    orientation: "vertical"
                    canvas.before:
                        Color:
                            rgba:0, 0, 0, 1
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [15,]

                    MDCard:
                        radius: [15,]
                        md_bg_color: 0, 0, 0, 0  # make the card transparent
                        on_release:
                            root.manager.transition = TransitionBase()
                            root.manager.current = "chatbot"
                        BoxLayout:
                            orientation: "vertical"
                            MDLabel:
                                id: big_text2
                                padding: "25dp", 24, 0, 0
                                line_height: 0.8
                                text: "Your AI Coach"
                                height: self.texture_size[1]
                                font_size: 30
                                padding: "74dp", 20, 0, 0
                                color: 1, 1, 1, 1
                                halign:"left"
                                font_name: "Poppins-Bold"
                                width: self.texture_size[0]
                            MDLabel:
                                id: completed2
                                padding: "75dp", 0, 0, 12
                                text: "Online •"
                                font_size: 16
                                color: 0, 1, 0, 1
                                halign:"left"
                                font_name: "Poppins-SemiBold"
                                width: self.texture_size[0]
                Image:
                    id: ai_image
                    source: "aicoachicon.png"
                    size_hint: .13, .13
                    pos_hint: {"center_x": .16, "center_y": .45}
                MDCard:
                    id: card_nutrition
                    size_hint: .435, .25
                    spacing: "-10dp"
                    pos_hint: {'center_x': 0.2625, 'center_y': .25}
                    md_bg_color: get_color_from_hex("0D0F13")  # make the card transparent
                    orientation: "vertical"
                    radius: [15,]
                Label:
                    text: "Nutrition"
                    font_size: 20
                    color: 1, 1, 1, 1
                    halign:"left"
                    height: self.texture_size[1]
                    width: self.texture_size[0]
                    font_name: "Poppins-Bold"
                    pos_hint: {'center_x': 0.18, 'center_y': .35}
                    elevation: 4
                CircularProgressBar:
                    id: calorie_circular_bar
                    size_hint:None, None
                    size: 140, 140
                    pos_hint: {"center_x":0.2625, "center_y":0.235}
                    active_text: False
                    before_bar_color: get_color_from_hex("5A5A5A")
                    bar_color: [0.02, 0.4, 0.61]  # RGBA for #05669D
                    bar_width: 4
                    value: 0
                CircularProgressBar:
                    id: protein_circular_bar
                    size_hint:None, None
                    size: 120, 120
                    active_text: False
                    pos_hint: {"center_x":0.2625, "center_y":0.235}
                    before_bar_color: get_color_from_hex("5A5A5A")
                    bar_color: [0.81, 0.58, 0.41]  # RGBA for #CE9368
                    bar_width: 4
                    value: 0
                CircularProgressBar:
                    id: fats_circular_bar
                    size_hint:None, None
                    size: 100, 100
                    pos_hint: {"center_x":0.2625, "center_y":0.235}
                    before_bar_color: get_color_from_hex("5A5A5A")
                    bar_color: [0.8, 0.46, 0.81]  # RGBA for #CC76CE
                    bar_width: 4
                    active_text: False
                    value: 0
                CircularProgressBar:
                    id: carbs_circular_bar
                    size_hint:None, None
                    size: 80, 80
                    pos_hint: {"center_x":0.2625, "center_y":0.235}
                    before_bar_color: get_color_from_hex("5A5A5A")
                    bar_color: [0.71, 0.29, 0.29]  # RGBA for #B64B4B
                    bar_width: 4
                    active_text: False
                    value: 0

                MDCard:
                    id: card_exercise
                    size_hint: .435, .115
                    spacing: "-10dp"
                    pos_hint: {'center_x': 1-0.2625, 'center_y': .32}
                    md_bg_color:0, 0, 0, 0  # make the card transparent
                    orientation: "vertical"
                    on_release:
                        root.manager.transition = TransitionBase() 
                        root.manager.current = "inputtrainingfrequency"
                    radius: [15,]
                    Image:
                        source: "background1.png"
                        size_hint_y: self.size_hint_y
                        size_hint_x: self.size_hint_x
                        pos_hint: self.pos_hint

                MDCard:
                    id: card3
                    size_hint: .435, .115
                    spacing: "-10dp"
                    pos_hint: {'center_x': 1-0.2625, 'center_y': .185}
                    md_bg_color:0,0,0,0 
                    orientation: "vertical"
                    radius: [15,]
                    on_release: 
                        root.manager.transition = TransitionBase()
                        app.root.get_screen('exercise_list').list_type= 'list'
                        root.manager.current = "exercise_list"
                    Image:
                        source: "background2.png"
                        size_hint_y: self.size_hint_y
                        size_hint_x: self.size_hint_x
                        pos_hint: self.pos_hint
                Label:
                    text: "My Plan"
                    font_size: 25
                    color: 1, 1, 1, 1
                    halign:"left"
                    font_name: "Poppins-Bold"
                    pos_hint: {'center_x': 1-0.2625, 'center_y': .32}
                    elevation: 4
                Label:
                    text: "Exercises"
                    font_size: 25
                    color: 1, 1, 1, 1
                    halign:"left"
                    font_name: "Poppins-Bold"
                    pos_hint: {'center_x': 1-0.2625, 'center_y': .185}
                    elevation: 4

            MDScreen:
                id : scr2
                md_bg_color: 0, 0, 0, 1
                name: "nutrition"
                on_enter: calorie_bar.start_animation()
                MDLabel:
                    text: "Calories"
                    font_name: "Poppins-SemiBold.ttf"
                    font_size: "31sp"
                    halign: "left"
                    color: 1, 1, 1, 1
                    pos_hint: {"center_x": .54, "center_y": .945}
                MDCard:
                    id: card
                    size_hint: .92, .4
                    spacing: "-10dp"
                    pos_hint: {'center_x': 0.5, 'center_y': .705}
                    md_bg_color:get_color_from_hex("0D0F13")
                    orientation: "vertical"
                    spacing: "-20dp"
                    radius: [11,]
                    canvas.before:
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                MDBoxLayout:
                    orientation: "vertical"
                    size_hint: .5, .08
                    pos_hint: {"center_x": .175, "center_y": .75}
                    MDLabel:
                        id: calories_remaining
                        text: "3453" 
                        padding:0,17,0,0
                        height: self.texture_size[1]
                        width: self.texture_size[0]
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: "22sp"
                        halign: "center"
                        color: 1, 1, 1, 1

                    MDLabel:
                        text: "Remaining"
                        width: self.texture_size[0]
                        font_name: "Poppins-Regular.ttf"
                        font_size: "12sp"
                        halign: "center"
                        color: 1, 1, 1, .6

                MDBoxLayout:
                    orientation: "vertical"
                    size_hint: .5, .08
                    pos_hint: {"center_x": 1-.175, "center_y": .75}
                    MDLabel:
                        id: calories_target
                        text: "4200"
                        padding:0,17,0,0
                        height: self.texture_size[1]
                        width: self.texture_size[0]
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: "22sp"
                        halign: "center"
                        color: 1, 1, 1, 1

                    MDLabel:
                        text: "Target"
                        width: self.texture_size[0]
                        font_name: "Poppins-Regular.ttf"
                        font_size: "12sp"
                        halign: "center"
                        color: 1, 1, 1, .6

                MDBoxLayout:
                    orientation: "vertical"
                    size_hint: .5, .08
                    pos_hint: {"center_x": .5, "center_y": .75}
                    MDLabel:
                        id: calories_consumed
                        text: "747"
                        padding:0,17,0,0
                        height: self.texture_size[1]
                        width: self.texture_size[0]
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: "27sp"
                        halign: "center"
                        color: 1, 1, 1, 1

                    MDLabel:
                        text: "Consumed"
                        width: self.texture_size[0]
                        font_name: "Poppins-Regular.ttf"
                        font_size: "13.5sp"
                        halign: "center"
                        color: 1, 1, 1, .6
                
                CircularProgressBar:
                    id: calorie_bar
                    size_hint:None, None
                    size: 170, 170
                    pos_hint: {"center_x": .5, "center_y": .75}
                    value: 747/4200*100
                    bar_color: [0.45, 0.46, 0.85]
                    before_bar_color: get_color_from_hex("515151")
                    bar_width: 3.8
                    active_text: False
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: .87, .1
                    pos_hint: {"center_x": .535, "center_y": .598}

                    HorizontalProgressBar:
                        id: protein_bar
                        value: 67
                        max_value: 160
                        name: 'Protein'
                        bar_color: get_color_from_hex("a35748")

                    HorizontalProgressBar:
                        id: fats_bar
                        value: 31
                        max_value: 98
                        name: 'Fat'
                        bar_color:get_color_from_hex("008d6d")

                    HorizontalProgressBar:
                        id: carbs_bar
                        value: 85
                        max_value: 150
                        name: 'Carbs'
                        bar_color:get_color_from_hex("a8b163")    
                MDBoxLayout:  # Container for the graph
                    orientation: 'vertical'
                    size_hint: .92, .3
                    pos_hint: {"center_x": .5, "center_y": .335}
                    BodyweightGraph:
                        size_hint: 1, .8
                        pos_hint: {"center_x": .5, "center_y": .5}
                        id: graph   
                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: 1, .099
                    pos_hint: {"center_x": .5, "center_y": .45}
                    padding: 35, 25,0,0
                    MDLabel:
                        text: "Weight Trend"
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: 21
                        height: self.texture_size[1]
                        halign: "left"
                        color: 1, 1, 1, 1
                    MDLabel:
                        text: "Nov 17-Now"
                        font_name: "Poppins-Medium.ttf"
                        font_size: 12
                        height: self.texture_size[1]
                        halign: "left"
                        color: get_color_from_hex("969696")
                FloatLayout:
                    size_hint: 1, .07
                    pos_hint: {"center_x": .5, "center_y": .12}
                    canvas.before:
                        Color:
                            rgba: get_color_from_hex("111111")
                        Rectangle:
                            size: self.size
                            pos: self.pos
                RoundedRectangle2:
                    size_hint: .92, .05
                    pos_hint: {'center_x': 0.5, 'center_y': 0.12}
                    btn_color: get_color_from_hex("343434")
                    btn_color_down: 18/255, 18/255, 18/255, .9
                    on_release: 
                        root.manager.transition = TransitionBase()
                        root.manager.current = "food_search"
                
                #box layout for search icon and search label
                MDBoxLayout:
                    size_hint_y: None
                    pos_hint: {'center_x': 0.54, 'center_y': 0.123}
                    height: dp(40)
                    padding: dp(10)
                    spacing: dp(10)
                    MDIcon:
                        icon: "magnify"
                        color: 1, 1, 1, 1
                        font_size: 22
                    Label:
                        id: search_label
                        text: "Search for a food"
                        size_hint: None, None
                        size: self.texture_size
                        color: 1, 1, 1, 1
                        font_name: "Poppins-Medium.ttf"
                        font_size: 18
                        opacity: .3
                        height: self.texture_size[1]
                        pos_hint: {"center_y": 0.45}

                MDIconButton:
                    pos_hint: {'center_x': 0.9, 'center_y': 0.12}
                    icon: "barcode-scan"
                    theme_icon_color: "Custom"
                    icon_color: 1, 1, 1, 1  
                    icon_size: 23
                    _no_ripple_effect: True

            MDScreen:
                id : scr3
                md_bg_color: 0, 1, 1, 1
                name: "favorite"
                MDLabel:
                    text: "Favorite"
                    pos_hint: {"center_x": .5, "center_y": .5}
            MDScreen:
                id : scr4
                md_bg_color: 1,1,0,1
                name: "profile"
                MDFloatLayout:
                    md_bg_color: 0, 0, 0, 1
                    MDIconButton:
                        icon: "dots-vertical"
                        pos_hint:{"center_x":.93,"center_y": .92}
                        user_font_size: "20sp"
                        theme_text_color: "Custom"
                        text_color: get_color_from_hex("475C77")
                    Image:
                        source: "login_icon.png"
                        size_hint: .78, .09
                        pos_hint: {"center_x": .15, "center_y": .92}
                    BoxLayout:
                        orientation: "vertical"
                        size_hint: .9, .6
                        pos_hint: {"center_x": .7, "center_y": .92}
                        MDLabel:
                            text: "Cock&Balls"
                            font_name: "Poppins-Bold.ttf"
                            font_size: "18sp"
                            halign: "left"
                            color: get_color_from_hex("475C77")

        NavBar:
            id: navbar
            size_hint: 1, .15
            pos_hint: {"center_x": .5, "center_y": .01}
            elevation: 4
            md_bg_color: 25/255, 29/255, 36/255, 1
            width: self.width

            
            MDIconButton:
                id: home
                text: "Home"
                icon: "home"
                icon_size: 40
                theme_icon_color: "Custom"
                icon_color: 1,1,1, 1
                _no_ripple_effect: True
                pos_hint: {"center_x": .13, "center_y": .7}
                button_width: navbar.width / 3.5
                on_release:
                    scr.current = "home"
                    app.root.get_screen('dashboard').get_calories_from_database(dt=None)
                on_state:
                    if self.state == 'down': root.change_color(True, False, False, False)

                            
            MDIconButton:
                id: nutrition
                icon: "nutrition"
                icon_size: 40
                _no_ripple_effect: True                
                theme_icon_color: "Custom"
                icon_color: 146/255, 155/255, 157/255, 1
                pos_hint: {"center_x": .37, "center_y": .7}
                button_width: navbar.width / 3.5
                on_release:
                    scr.current = "nutrition"
                on_state:
                    if self.state == 'down': root.change_color(False, True, False, False)
                    
            MDIconButton:
                id: chart
                icon: "chart-timeline-variant"
                icon_size: 40
                _no_ripple_effect: True                
                theme_icon_color: "Custom"
                icon_color: 146/255, 155/255, 157/255, 1
                pos_hint: {"center_x": .62, "center_y": .7}
                button_width: navbar.width / 3.5
                on_release:
                    scr.current = "favorite"
                on_state:
                    if self.state == 'down': root.change_color(False, False, True, False)
            
            MDIconButton:
                id: profile
                icon: "account"
                icon_size: 40
                _no_ripple_effect: True                
                theme_icon_color: "Custom"
                icon_color: 146/255, 155/255, 157/255, 1
                pos_hint: {"center_x": .87, "center_y": .7}
                button_width: navbar.width / 3.5
                on_release:
                    scr.current = "profile"
                on_state:
                    if self.state == 'down': root.change_color(False, False, False, True)

<FoodSearch>:
    name: 'food_search'
    on_enter: search_field.focus = True
    MDFloatLayout:
        md_bg_color: 12/255, 14/255, 18/255, 1
        ScreenManager:
            id : food_screen_manager
            transition: NoTransition()
            MDScreen:
                name: "food_search_screen"
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: 0, 0, 0, 0
                    canvas.before:
                        Color:
                            rgba: get_color_from_hex("#0a0a0a")
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    FloatLayout:
                        MDCard:
                            id: added_food_card
                            orientation: "vertical"
                            size_hint: 1, None
                            pos_hint_x: {'center_x': 0.5}
                            height: "590dp"  
                            radius: [0,]
                            padding: "8dp"
                            md_bg_color:get_color_from_hex("#0a0a0a")
                            MDBoxLayout:
                                size_hint_y: None
                                height: "8dp"
                                adaptive_height: True
                            RecycleView:
                                viewclass: 'SavedFoodListItem'
                                id: added_food_rv
                                RecycleBoxLayout:
                                    default_size: None, dp(50)
                                    default_size_hint: 1, None
                                    size_hint_y: None
                                    height: self.minimum_height
                                    orientation: 'vertical' 
                        FloatLayout:
                            RoundedRectangle2:
                                text: "Log"
                                font_name: "Poppins-SemiBold.ttf"
                                color: 0, 0, 0, 1                         
                                size_hint: .22, 1
                                pos: 330, 100
                                radius: [20,]
                                btn_color: get_color_from_hex("ffffff")
                                btn_color_down: get_color_from_hex("CCCCCC")
                                on_release: root.log_food()
                    MDBoxLayout:
                        size_hint: 1, .3
                        canvas.before:
                            Color:
                                rgba: get_color_from_hex("#0a0a0a")
                            Rectangle:
                                size: self.size
                                pos: self.pos

                    DraggablePanel:
                        id: draggable_panel
                        size_hint: 1, None
                        height: self.panel_height   
                        start_hidden: False
                        FloatLayout:                 
                            MDBoxLayout:
                                canvas.before:
                                    Color: 
                                        rgba: get_color_from_hex("#303030")
                                    Rectangle:
                                        size: 450, 5
                                        pos: (self.parent.pos[0] + self.parent.size[0] * 0.5 - self.size[0] / 2), self.parent.pos[1] + self.parent.size[1] * 0.872 

                            HorizontalBar: #TODO add logic to switch position based on the clicked option
                                id: horizontal_bar
                                canvas.before:
                                    Color: 
                                        rgba: 1, 1, 1, 1
                                    Rectangle:
                                        size: 150, 5
                                        pos: (self.parent.pos[0] + self.parent.size[0] * 0.5 - self.size[0] / 2)+ self.bar_position, self.parent.pos[1] + self.parent.size[1] * 0.872 
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: 1, .03
                                pos_hint: {'x': 0.0, 'y': 0.895}
                                MDIcon:
                                    id: scan_icon
                                    padding: 38, 0, 0, 2
                                    icon: "barcode-scan"
                                    color: 1, 1, 1, 1
                                    font_size: 20
                                    opacity: .3
                                MDLabel:
                                    id: scan_text
                                    padding: 0, 0, 48, 0
                                    text: "Scan"
                                    color: 1, 1, 1, 1
                                    font_size: 18
                                    font_name: "Poppins-SemiBold.ttf"
                                    halign: 'center'
                                    opacity: .3
                                MDIcon:
                                    id: search_icon
                                    padding: 7, 0, 0, 0
                                    icon: "magnify"
                                    color: 1, 1, 1, 1
                                    font_size: 22
                                    opacity: 1
                                MDLabel:
                                    id: search_text
                                    padding: 0, 0, 40, 0
                                    text: "Search"
                                    color: 1, 1, 1, 1
                                    font_size: 18
                                    font_name: "Poppins-SemiBold.ttf"
                                    halign: 'center'
                                    opacity: 1
                                MDIcon:
                                    id: quick_add_icon
                                    padding: 10, 0, 0, 0
                                    icon: "playlist-plus"
                                    color: 1, 1, 1, 1
                                    font_size: 22
                                    opacity: .3
                                MDLabel:
                                    id: quick_add_text
                                    padding: 0, 0, 10, 0
                                    text: "Quick Add"
                                    color: 1, 1, 1, 1
                                    font_size: 17
                                    font_name: "Poppins-SemiBold.ttf"
                                    halign: 'center'
                                    opacity: .3
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: 1, .06
                                pos_hint: {'x': 0.0, 'y': 0.88}
                                RoundedRectangle2:
                                    radius: [0,]
                                    size_hint: .33, 1
                                    btn_color: [0, 0, 0, 0]
                                    btn_color_down: [0, 0, 0, 0]
                                    on_release: root.quick_actions(True, False, False)
                                    
                                RoundedRectangle2:
                                    radius: [0,]
                                    size_hint: .33, 1
                                    btn_color: [0, 0, 0, 0]
                                    btn_color_down: [0, 0, 0, 0]
                                    on_release: root.quick_actions(False, True, False)
                                RoundedRectangle2:
                                    radius: [0,]
                                    size_hint: .33, 1
                                    btn_color: [0, 0, 0, 0]
                                    btn_color_down: [0, 0, 0, 0]                                    
                                    on_release: root.quick_actions(False, False, True)
                                    
                        MDCard:
                            id: rv_card
                            orientation: "vertical"
                            size_hint: 1, None
                            pos: self.parent.pos[0] + self.parent.size[0] * 0.5 - self.size[0] / 2, self.parent.pos[1] + self.parent.size[1] * 0.093 
                            height: "468dp"  
                            radius: [0,]
                            padding: "8dp"
                            md_bg_color:get_color_from_hex("#202020")
                            MDBoxLayout:
                                size_hint_y: None
                                height: "5dp"
                                adaptive_height: True
                            
                            RecycleView:
                                viewclass: 'FoodListItem'
                                id: rv
                                RecycleBoxLayout:
                                    default_size: None, dp(50)
                                    default_size_hint: 1, None
                                    size_hint_y: None
                                    height: self.minimum_height
                                    orientation: 'vertical' 

                                
                        FloatLayout:
                            id: search
                            RoundedRectangle2:
                                size_hint: .75, .06
                                pos: self.parent.pos[0] + self.parent.size[0] * 0.41 - self.size[0] / 2, self.parent.pos[1] + self.parent.size[1] * (0.12-.1) + draggable_panel.y
                                btn_color: get_color_from_hex("ffffff")
                                btn_color_down: 18/255, 18/255, 18/255, .9
                                
                            RoundedRectangle2:
                                size_hint: .74, .056
                                pos: self.parent.pos[0] + self.parent.size[0] * 0.41 - self.size[0] / 2, self.parent.pos[1] + self.parent.size[1] * (0.122-.1) + draggable_panel.y
                                btn_color: get_color_from_hex("343434")
                                btn_color_down: 18/255, 18/255, 18/255, .9
                                
                            RoundedRectangle2:
                                text: "Log"
                                font_name: "Poppins-SemiBold.ttf"
                                color: 0, 0, 0, 1                         
                                size_hint: .18, .06
                                pos: self.parent.pos[0] + self.parent.size[0] * .89 - self.size[0] / 2, self.parent.pos[1] + self.parent.size[1] * (0.12-.1) + draggable_panel.y
                                btn_color: get_color_from_hex("ffffff")
                                btn_color_down: get_color_from_hex("CCCCCC")
                                on_release: root.log_food()
                            #box layout for search icon and search label
                            MDBoxLayout:
                                id: hint_text
                                size_hint_y: None
                                pos: self.parent.pos[0] + self.parent.size[0] * 0.54 - self.size[0] / 2, self.parent.pos[1] + self.parent.size[1] * (0.119-.1) + draggable_panel.y
                                height: dp(40)
                                padding: dp(10)
                                spacing: dp(10)
                                MDIcon:
                                    icon: "magnify"
                                    color: 1, 1, 1, 1
                                    font_size: 22
                                Label:
                                    id: search_label
                                    text: "Search for a food"
                                    size_hint: None, None
                                    size: self.texture_size
                                    color: 1, 1, 1, 1
                                    font_name: "Poppins-Medium.ttf"
                                    font_size: 18
                                    opacity: .3
                                    height: self.texture_size[1]
                                    pos_hint: {"center_y": 0.45}

                            #search field for exercises
                            TextInput:
                                id: search_field
                                font_name: "Poppins-Medium.ttf"
                                font_size: 18
                                background_color: 0, 0, 0, 0
                                foreground_color: 1, 1, 1, 1
                                cursor_color: 1, 1, 1, 1
                                multiline: False
                                input_type: 'text'
                                size_hint: .65, .05
                                pos: self.parent.pos[0] + self.parent.size[0] * 0.47 - self.size[0] / 2, self.parent.pos[1] + self.parent.size[1] * (0.126-.1) + draggable_panel.y
                                padding: [0, (self.height - self.line_height) / 2, 10, 5]
                                on_text: root.search_query(self.text) 

            MDScreen:
                name: "food_details_screen"
                BoxLayout:
                    orientation: 'vertical'
                    padding: 0, 0, 0, 0
                    canvas.before:
                        Color:
                            rgba: get_color_from_hex("#0a0a0a")
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    MDBoxLayout:
                        size_hint: 1, .3
                        canvas.before:
                            Color:
                                rgba: get_color_from_hex("#0a0a0a")
                            Rectangle:
                                size: self.size
                                pos: self.pos

                    FloatLayout:
                        size_hint: 1, None
                        height: 750
                        canvas.before:
                            Color:
                                rgba: get_color_from_hex("#141414")
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                                radius: [15,]
                        FloatLayout:
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .85, .2
                                pos_hint: {'x': 0.1, 'y': 0.86}       
                                
                                MDLabel:
                                    id:food_details_label
                                    text: "Chicken Breast Grilled Boneless Skinless"
                                    color: 1, 1, 1, 1
                                    font_size: 19
                                    font_name: "Poppins-Medium"
                                    halign: 'left'
                                    
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .4, .2
                                pos_hint: {'x': 0.00, 'y': 0.923}                                 
                                MDIconButton:
                                    icon: "chevron-left"
                                    theme_text_color: "Custom"
                                    icon_color: get_color_from_hex("#ffffff") if self.state == 'normal' else get_color_from_hex("#767676")
                                    icon_size: "22sp"
                                    _no_ripple_effect: True
                                    on_release: food_screen_manager.current = "food_search_screen"
                            
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .2, .13
                                pos_hint: {'x': 0.05, 'y': 0.79}
                                
                                MDLabel:
                                    id: calories_amount
                                    text: "126"
                                    color: 1, 1, 1, 1
                                    font_size: 34
                                    font_name: "Poppins-SemiBold"
                                    halign: 'center'
                                    
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .1, .04
                                pos_hint: {'x': 0.4, 'y': 0.87}

                                RoundedRectangle2:
                                    id: protein_percentage
                                    radius: [14,]
                                    size_hint: None, None
                                    size: 50, 25
                                    markup: True
                                    text: "[size=15][font=Poppins-Medium.ttf]80%[/font][/size]"
                                    btn_color: get_color_from_hex("7c2a13")
                                    btn_color_down: get_color_from_hex("7c2a13")  

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .1, .04
                                pos_hint: {'x': 0.6, 'y': 0.87}

                                RoundedRectangle2:
                                    id: fats_percentage
                                    radius: [14,]
                                    size_hint: None, None
                                    size: 50, 25
                                    markup: True
                                    text: "[size=15][font=Poppins-Medium.ttf]20%[/font][/size]"
                                    btn_color: get_color_from_hex("444501")
                                    btn_color_down: get_color_from_hex("444501")

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .1, .04
                                pos_hint: {'x': 0.8, 'y': 0.87}

                                RoundedRectangle2:
                                    id: carbs_percentage
                                    radius: [14,]
                                    size_hint: None, None
                                    size: 50, 25
                                    markup: True
                                    text: "[size=15][font=Poppins-Medium.ttf]0%[/font][/size]"
                                    btn_color: get_color_from_hex("003E2D")
                                    btn_color_down: get_color_from_hex("003E2D")
                                    
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .59, .2
                                pos_hint: {'x': 0.36,'y': 0.75}
                                
                                MDLabel:
                                    id: protein_amount
                                    text: "25.1"
                                    color: 1, 1, 1, 1
                                    font_size: 22
                                    font_name: "Poppins-SemiBold"
                                    halign: 'center'
                                
                                MDLabel:
                                    id: fats_amount
                                    text: "2.9"
                                    color: 1, 1, 1, 1
                                    font_size: 22
                                    font_name: "Poppins-SemiBold"
                                    halign: 'center'
                                
                                MDLabel:
                                    id: carbs_amount
                                    text: "0.3"
                                    color: 1, 1, 1, 1
                                    font_size: 22
                                    font_name: "Poppins-SemiBold"
                                    halign: 'center'
                                    
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .2, .2
                                pos_hint: {'x': 0.05, 'y': 0.715}

                                MDLabel:
                                    text: "Calories"
                                    color: 1, 1, 1, .6
                                    font_size: 16
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                                                                
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .62, .2
                                pos_hint: {'x': 0.35, 'y': 0.715}
                            
                                MDLabel:
                                    text: "Protein(g)"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                                
                                MDLabel:
                                    text: "Fat(g)"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                                    
                                MDLabel:
                                    text: "Carbs(g)"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                            MDLabel:
                                text: "Impact on your daily targets"
                                color: 1, 1, 1, 1
                                font_size: 20
                                font_name: "Poppins-Bold"
                                pos_hint: {'center_x': .56,'center_y': .74}
                            FloatLayout:
                                canvas.before:
                                    Color: 
                                        rgba: get_color_from_hex("#303030")
                                    Rectangle:
                                        size: 435, 1
                                        pos: self.width * 0.012, self.height * 0.78           
                            CircularProgressBar:
                                id: calories_bar
                                size_hint:None, None
                                size: 50, 50
                                pos_hint: {"center_x": .16, "center_y": .65}
                                bar_color: [108/255,140/255,194/255]
                                before_bar_color: get_color_from_hex("515151")
                                bar_width: 1.7
                                active_text: True        
                                                 
                            CircularProgressBar:
                                id: protein_bar
                                size_hint:None, None
                                size: 50,50
                                pos_hint: {"center_x": .395, "center_y": .65}
                                bar_color: [202/255,163/255,138/255]  # RGBA equivalent of #450901
                                before_bar_color: get_color_from_hex("515151")
                                bar_width: 1.7
                                active_text: True       

                            CircularProgressBar:
                                id: fats_bar
                                size_hint:None, None
                                size: 50,50
                                pos_hint: {"center_x": .64, "center_y": .65}
                                bar_color: [240/255, 205/255, 124/255]  # RGBA equivalent of #444501
                                before_bar_color: get_color_from_hex("515151")
                                bar_width: 1.7
                                active_text: True 

                            CircularProgressBar:
                                id: carbs_bar
                                size_hint:None, None
                                size: 50,50
                                pos_hint: {"center_x": .874, "center_y": .65}
                                bar_color:[114/255, 157/255, 138/255]  # RGBA equivalent of #003E2D
                                before_bar_color: get_color_from_hex("515151")
                                bar_width: 1.7
                                active_text: True
                                    
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint: .96, .2
                                pos_hint: {'x': 0.04, 'y': 0.49}
                                
                                MDLabel:
                                    text: "Calories"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'                           
                                MDLabel:
                                    text: "Protein"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                                
                                MDLabel:
                                    text: "Fat"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                                    
                                MDLabel:
                                    text: "Carbs"
                                    color: 1, 1, 1, .6
                                    font_size: 14
                                    font_name: "Poppins-Regular"
                                    halign: 'center'
                            FloatLayout:
                                canvas.before:
                                    Color: 
                                        rgba: get_color_from_hex("#303030")
                                    Rectangle:
                                        size: 435, 1
                                        pos: self.width * 0.012, self.height * 0.54     
                            MDLabel:
                                text: "Portion Size"
                                color: 1, 1, 1, 1
                                font_size: 20
                                font_name: "Poppins-Bold"
                                pos_hint: {'center_x': .56,'center_y': .5}
                        MDBoxLayout: #unit selection option buttons
                            orientation: 'horizontal'
                            size_hint: .89, .7
                            pos_hint: {'center_x': 0.5,'center_y': 0.49}
                            spacing: 5
                            RoundedRectangle2:
                                id: portion_unit_serving
                                text: "serving"
                                font_name: "Poppins-Medium.ttf"
                                font_size: 13
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [20,]
                                btn_color: get_color_from_hex("232323")
                                btn_color_down: get_color_from_hex("232323")
                                on_state:
                                    if self.state == 'down': root.selected_unit(True, False, False, False, False, False)
                            RoundedRectangle2:
                                id: portion_unit_oz
                                text: "oz"
                                font_name: "Poppins-Medium.ttf"
                                font_size: 13
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [20,]
                                btn_color: get_color_from_hex("232323")
                                btn_color_down: get_color_from_hex("232323")
                                on_state:
                                    if self.state == 'down': root.selected_unit(False, True, False, False, False, False)
                            RoundedRectangle2:
                                id: portion_unit_g
                                text: "g"
                                font_name: "Poppins-Medium.ttf"
                                font_size: 13
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [20,]
                                btn_color: get_color_from_hex("232323")
                                btn_color_down: get_color_from_hex("232323")
                                on_state:
                                    if self.state == 'down': root.selected_unit(False, False, True, False, False, False)                                
                            RoundedRectangle2:
                                id: portion_unit_hg
                                text: "hg"
                                font_name: "Poppins-Medium.ttf"
                                font_size: 13                                                    
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [20,]
                                btn_color: get_color_from_hex("232323")
                                btn_color_down: get_color_from_hex("232323")
                                on_state:
                                    if self.state == 'down': root.selected_unit(False, False, False, True, False, False)
                            RoundedRectangle2:
                                id: portion_unit_lb
                                text: "lb"
                                font_name: "Poppins-Medium.ttf"
                                font_size: 13                          
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [20,]
                                btn_color: get_color_from_hex("232323")
                                btn_color_down: get_color_from_hex("232323")
                                on_state:
                                    if self.state == 'down': root.selected_unit(False, False, False, False, True, False)
                            RoundedRectangle2:
                                id: portion_unit_cup
                                text: "cup"
                                font_name: "Poppins-Medium.ttf"
                                font_size: 13                         
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [20,]
                                btn_color: get_color_from_hex("232323")
                                btn_color_down: get_color_from_hex("232323")
                                on_state:
                                    if self.state == 'down': root.selected_unit(False, False, False, False, False, True)
                        MDBoxLayout:
                            orientation: 'horizontal'
                            spacing: 3
                            size_hint: .89, .9
                            pos_hint: {'center_x': 0.5,'center_y': 0.42}
                            RoundedRectangle2:
                                size_hint: .38, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [3,]
                                btn_color: get_color_from_hex("282725")
                                btn_color_down: get_color_from_hex("202020")
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1  
                                    Line:
                                        width: 1  # Change this to adjust the border thickness
                                        rounded_rectangle: (*self.pos, *self.size, self.radius[0])
                            RoundedRectangle2:
                                text: "Log Foods"
                                color: 1, 1, 1, 1
                                font_name: "Poppins-SemiBold.ttf"
                                font_size: 14
                                size_hint: .15, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [3,]
                                btn_color: get_color_from_hex("4b4b4d")
                                btn_color_down: get_color_from_hex("202020")
                                on_release: root.log_food()
                            RoundedRectangle2:
                                id: add_food
                                text: "Add"
                                color: 0, 0, 0, 1
                                font_name: "Poppins-SemiBold.ttf"
                                font_size: 15
                                size_hint: .09, .07
                                pos_hint: {'center_x': .5,'center_y': .43}
                                radius: [3,]
                                btn_color: get_color_from_hex("ffffff")
                                btn_color_down: get_color_from_hex("202020")
                                on_release: 
                                    root.saved_foods()
                                    food_screen_manager.current = "food_search_screen"

                        LimitTextInput:
                            id: portion_size
                            text: "1"
                            font_name: "Poppins-Medium.ttf"
                            font_size: 20
                            background_color: 0, 0, 0, 0
                            foreground_color: 1, 1, 1, 1
                            cursor_color: 1, 1, 1, 1
                            multiline: False
                            on_text: 
                                self.readonly = True if len(self.text.strip()) == 6 else False
                                root.update_portion_values()
                                root.update_unpacked_data()
                            input_type: 'number'
                            input_filter: 'float'
                            size_hint: .45, .062
                            pos_hint: {'center_x': 0.28,'center_y': 0.358}
                            padding: [10, (self.height - self.line_height) / 2, 10, 5]
                        MDLabel:
                            id: portion_hint_text
                            text: "serving • 190.28g"
                            color: 1, 1, 1, .5
                            font_size: 13
                            font_name: "Poppins-Regular"
                            halign: 'right'
                            size_hint: .45, .062
                            pos_hint: {'center_x': 0.35,'center_y': 0.358}
        FloatLayout:
            BoxLayout:
                size_hint: 1, .1
                pos_hint: {'center_x': 0.48, 'center_y': 0.968}
                canvas.before:
                    Color:
                        rgba:1,0,0,0
                    Rectangle:
                        size: self.size
                        pos: self.pos

                MDIconButton:
                    icon: "circle"
                    theme_text_color: "Custom"
                    icon_color: get_color_from_hex("#202020")
                    icon_size: "40sp"
            BoxLayout:
                size_hint: 1, .1
                pos_hint: {'center_x': 0.51, 'center_y': 0.985}
                canvas.before:
                    Color:
                        rgba:1,0,0,0
                    Rectangle:
                        size: self.size
                        pos: self.pos

                MDIconButton:
                    icon: "close"
                    theme_text_color: "Custom"
                    icon_color: get_color_from_hex("#ffffff")
                    icon_size: "18sp"
                    type: "small"
                    on_release: 
                        root.manager.current = "dashboard"
                        app.root.get_screen('dashboard').change_color(False, True, False, False)
                        app.root.get_screen('dashboard').get_calories_from_database(dt=None)
                BoxLayout:
                    size_hint: None, .55
                    width: dp(130)
                    padding: 0, 0, 0, 6.4 # Left, top, right, bottom padding
                    RoundedButton:
                        btn_color: get_color_from_hex("#202020")
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, .2  # White color
                            RoundedRectangle:
                                pos: self.pos[0] - 2, self.pos[1] - 2  # Position of the border
                                size: self.size[0] + 4, self.size[1] + 4  # Size of the border
                                radius: [(self.height / 2.0) + 2] * 4  # Radius of the border
                        canvas.after:
                            Color:
                                rgba: get_color_from_hex("#202020")  # Button color
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [self.height / 2.0] * 4  # Radius of the button
            MDIconButton:
                icon: "circle"
                theme_text_color: "Custom"
                icon_color: get_color_from_hex("#202020")
                icon_size: "40sp"
                pos_hint: {'center_x': 0.93, 'center_y': 0.968}
                no_ripple_effect: True
            MDIconButton:
                icon: "circle"
                theme_text_color: "Custom"
                icon_color: get_color_from_hex("#ffffff")
                icon_size: "28sp"
                pos_hint: {'center_x': 0.93, 'center_y': 0.968}
                no_ripple_effect: True
            MDIconButton:
                icon: "chevron-down-circle"
                theme_text_color: "Custom"
                icon_color: get_color_from_hex("#202020")
                icon_size: "31sp"
                pos_hint: {'center_x': 0.93, 'center_y': 0.968}
                no_ripple_effect: True
                on_release: draggable_panel.toggle()
            BoxLayout:
                pos_hint: {'center_x': 0.31,'center_y': 0.968}
                orientation: 'vertical'
                size_hint: .37, .05
                MDLabel:
                    text: "Breakfast" #TODO add logic to switch this to Lunch, Dinner, Snacks
                    color: 1, 1, 1, 1
                    font_size: 19
                    font_name: "Poppins-Medium"
                    halign: 'center'
            FloatLayout:
                RoundedRectProgressBar:
                    id: daily_calories_consumed
                    pos_hint: {'center_x': .732,'center_y': 0.968}
                    size_hint: None, None
                    size: 120, 40
            FloatLayout:
                pos_hint: {'center_x': .732,'center_y': 0.968}
                size_hint: .24873, .042
                canvas.before:
                    Color:
                        rgba: get_color_from_hex("#202020")
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [20,]


            BoxLayout:
                pos_hint: {'center_x': 0.7282,'center_y': 0.968}
                orientation: 'vertical'
                size_hint: .37, .05
                MDLabel:
                    id: calories_consumed
                    text: "2300/4522"
                    color: 1, 1, 1, 1
                    font_size: 15
                    font_name: "Poppins-Bold"
                    halign: 'center'
                            
<ExerciseList>:
    name: "exercise_list"
    canvas.before:
        Color:
            rgba:  get_color_from_hex("#131313")
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        size_hint: 1, .985
        canvas.before:
            Color:
                rgba: get_color_from_hex("#131313")
            RoundedRectangle:
                radius: [22,]
                pos: self.pos
                size: self.size
        orientation: 'vertical'
        
        #card layout for exercises
        MDCard:
            id: rvcard
            orientation: "vertical"
            size_hint: .92, None
            pos_hint: {'center_x': .5, 'center_y': 0.15}
            height: "450dp"  # Adjust the height as needed
            radius: [21]  
            padding: "8dp"
            md_bg_color: get_color_from_hex("#0C0C0C")
            MDBoxLayout:
                size_hint_y: None
                height: "5dp"
                adaptive_height: True
            
            #recycle view for exercises, will be populated with exercises from database
            #it uses a type of list that doesn't generate at once but procedurally
            RecycleView:
                id: rv
                viewclass: 'ExerciseItemPlan' if root.list_type == "selectable" else 'ExerciseItem'
                RecycleBoxLayout:
                    default_size: None, dp(56)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'
    MDBoxLayout:
        size_hint_x: 0.9
        pos_hint: {'center_x': .5, 'center_y': 0.51}
        Label:
            id: exercise_label
            text: "Exercises"
            size_hint: None, None
            size: self.texture_size
            color: get_color_from_hex("9300ED")
            haligh: 'left'
            font_name: "Poppins-SemiBold.ttf"
            font_size: 24
            height: dp(20)
            pos_hint: {"center_x": 0.175, "top": .9}
    DarkRoundedRectangle:
        id: search_btn
        size_hint: .92, .065
        pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        btn_color: get_color_from_hex("0C0C0C")
        btn_color_down: 18/255, 18/255, 18/255, .9
    
    #box layout for search icon and search label
    MDBoxLayout:
        id: search_box
        size_hint_y: None
        pos_hint: {'center_x': 0.54, 'center_y': 0.803}
        height: dp(40)
        padding: dp(10)
        spacing: dp(10)

        MDIcon:
            icon: "magnify"
            font_size: 22
            opacity: .4
            color: 1, 1, 1, 1

        Label:
            id: search_label
            text: "Search"
            size_hint: None, None
            size: self.texture_size
            color: 1, 1, 1, 1
            font_name: "Poppins-SemiBold.ttf"
            font_size: 20
            opacity: .3
            height: self.texture_size[1]
            pos_hint: {"center_y": 0.45}

    #search field for exercises
    LimitTextInput2:
        id: search_field
        font_name: "Poppins-Bold.ttf"
        font_size: 18
        auto_insert_dot: False
        background_color: 0, 0, 0, 0
        foreground_color: 166/255, 166/255, 166/255, 1
        cursor_color: 1, 1, 1, 1
        multiline: False
        max_text_length: 2
        input_type: 'text'
        size_hint: .92, .065
        pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        padding: [45, (self.height - self.line_height) / 2, 10, 5]
        on_text: root.search_query(self.text)
    Label:
        id: exercise_count
        text: "117 exercises"
        size_hint: None, None
        size: self.texture_size
        color: 1, 1, 1, 1
        font_name: "Poppins-SemiBold.ttf"
        pos_hint: {"center_x": 0.18, "top": .745}
        font_size: 16
        opacity: .5

    MDTextButton:
        id: back_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: get_color_from_hex("9300ED")
        pos_hint: {"top" : 0.96, "x" : 0.053}
        on_release:
            root.change_screen()
  
    MDBoxLayout:
        id: exercise_guide_box
        size_hint: .9, .81
        pos_hint: {'center_x': 2, 'center_y': 0.4}
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            MDLabel:
                id: exercise_guide_text
                markup: True
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                text: ""
                font_name: "Poppins-SemiBold.ttf"
                font_size: 14
                haligh: 'left'
                color: 1, 1, 1, 1
    MDFloatLayout:
        id: add_exercises_layout
        size_hint: 1, .08
        pos_hint: {'center_x': 0.5, 'center_y': 0.04}
        canvas.before:
            Color:
                rgba:get_color_from_hex("#0a0a0a")
            Rectangle:
                size: self.size
                pos: self.pos
        RoundedRectangle2:
            id: add_exercises_btn
            text: "Add (0)"
            color: 1, 1, 1, 1
            font_name: "Poppins-SemiBold.ttf"
            font_size: 18
            size_hint: .9, .85
            on_release: root.on_button_clicked()
            pos_hint: {'center_x': .5,'center_y': .5}
            radius: [15,]
            btn_color: 105/255, 0, 188/255, 1 
            btn_color_down: 74/255, 43/255, 253/255, .8
<SelectWorkout>
    name: 'select_workout'
    canvas.before:
        Color:
            rgba: get_color_from_hex("#0a0a0a")
        Rectangle:
            size: self.size
            pos: self.pos

    RecycleView:
        id: workout_view
        size_hint: .9, .72
        pos_hint: {'center_x': 0.5, 'center_y': 0.53}
        viewclass: 'ListCard'

        RecycleBoxLayout:
            size_hint: 1, None
            padding_x: dp(22)
            spacing: dp(8)
            default_size: None, dp(60)
            default_size_hint: 1, None
            height: self.minimum_height
            orientation: 'vertical'
    RoundedRectangle2:
        id: empty_plan_border
        size_hint: .91, None
        height: dp(66)
        pos_hint: {'center_x': 0.5, 'center_y': 0.08}
        radius: [11,]
        canvas.before:
            RoundedRectangle:
                texture: Gradient.horizontal(get_color_from_hex("5A5A5A"), get_color_from_hex("02134F"))
                pos: self.pos
                size: self.size
                radius: [11,]
    ListCard:
        id: empty_plan_card
        markup: True
        size_hint: .9, .1
        pos_hint: {'center_x': 0.5, 'center_y': 0.08}
        text: "[size=24][font=Poppins-SemiBold.ttf][color=FFFFFF]New Empty Plan[/color][/font][/size]"
        on_release: root.manager.current = "empty_plan"
        icon: "clipboard"
        editable: False
        log: False

    MDBoxLayout:
        pos_hint: {'center_x': 0.5, 'center_y': 0.92}
        size_hint: .9, .1
        MDLabel:
            id: selected_workout
            text: "Selected Workout"
            color: 1, 1, 1, 1
            font_size: 30
            font_name: "Poppins-SemiBold.ttf"
            halign: 'left'
    MDTextButton:
        text: "Back"
        pos_hint: {"top" : 0.97, "x" : 0.055}
        on_release: 
            root.manager.current = "dashboard"
            app.root.get_screen('dashboard').get_calories_from_database(dt=None)
        font_name: "Poppins-SemiBold.ttf"
        font_size: 13
        color: get_color_from_hex("#6900BC")      
    RoundedRectangle2:
        id: behind_panel_rec
        size_hint: 1, 1
        pos_hint: {'center_x': 2, 'center_y': 2}
        btn_color: 0, 0, 0, 0.6
        btn_color_down: 0, 0, 0, 0.6
        on_release: 
            choose_plan_panel.toggle()
            root.choose_plan_panel("")

    DraggablePanel:
        id: choose_plan_panel
        size_hint: 1, None
        height: dp(310)
        open_position: dp(310)
        closed_position: 0
        start_hidden: True
        MDLabel:
            text: "Choose Plan"
            pos_hint: {'center_x': 0.197, 'center_y': 0.9}
            color: get_color_from_hex("#6900BC")
            font_size: 20
            font_name: "Poppins-SemiBold.ttf"
            halign: 'center'
        AnchorLayout:
            id: plan_items_container
            anchor_x: 'center'
            anchor_y: 'top'  # Anchors the list to start from the top
            pos: self.parent.pos
            size_hint: 1, None
            height: dp(260)
            canvas.before:
                Color:
                    rgba: 0.2, 0.8, 0.4, 0
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [0,]    
            MDBoxLayout:
                id: items_box
                pos_hint: {'center_x': 0.5,'center_y': 0.5}
                orientation: "vertical"
                size_hint_y: None
                height: dp(35)
                canvas.before:
                    Color:
                        rgba: 0.8, 0.8, 0.4, 0
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [0,] 


<EmptyPlan>:
    name: 'empty_plan'
    MDFloatLayout:
        md_bg_color: get_color_from_hex("#0a0a0a")
        #screen manager to switch between days
        ScreenManager:
            id : empty_plan_scr
            transition: SlideTransition()
            MDScreen:
                name: 'empty_plan_day_1'
                id: day_1_screen
                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: .95, .1
                    pos_hint: {'center_x': 0.525, 'center_y': 0.835}
                    MDLabel:
                        id: title_1
                        text: "Day 1"
                        color: 1, 1, 1, 1
                        font_size: 27
                        font_name: "Poppins-SemiBold"
                        halign: 'left'
                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: .95, .1
                    pos_hint: {'center_x': 0.53, 'center_y': 0.785}
                    MDLabel:
                        id: subtitle_1
                        text: "Day 1"
                        color: 1, 1, 1, .7
                        font_size: 18
                        font_name: "Poppins-Medium"
                        halign: 'left'
                MDFloatLayout:
                    id: add_exercise_btn_1
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    RoundedRectangle2:
                        id: border_1
                        color: 1, 1, 1, 1
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: 18
                        size_hint: .509, .077
                        pos_hint: {'center_x': .3,'center_y': .7}
                        radius: [10,]
                        canvas.before:
                            RoundedRectangle:
                                texture: Gradient.horizontal(get_color_from_hex("0B004A"), get_color_from_hex("550038"))
                                pos: self.pos
                                size: self.size
                                radius: [10,]
                    RoundedRectangle2:
                        id: add_exercise_txt_1
                        text: "     Add Exercises"
                        color: 1, 1, 1, 1
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: 18
                        size_hint: .5, .07
                        on_release: root.manager.current = "exercise_list"
                        pos_hint: {'center_x': .3,'center_y': .7} #.7
                        radius: [10,]
                        btn_color: get_color_from_hex("0D0F13")
                        btn_color_down: get_color_from_hex("050608")
                    MDIcon:
                        id: add_exercise_icon_1
                        icon: "plus-thick"
                        color: 1, 1, 1, 1
                        font_size: 22
                        pos_hint: {'center_x': .14,'center_y': .7}   #.7
                    RoundedRectangle2:
                        id: dots_rec_1
                        size_hint: .11, .045
                        btn_color: get_color_from_hex("0D0F13")
                        pos_hint: {'center_x': 0.3, 'center_y': 0.835}
                        radius: [10,]
                    MDIcon:
                        id: dots_1
                        icon: "dots-horizontal"
                        color: 1, 1, 1, 1
                        font_size: 45
                        pos_hint: {'center_x': 0.3, 'center_y': 0.835}
                        icon_color: get_color_from_hex("#5E5E5E")
                #display selected exercises that the user would put in the plan
                AnchorLayout:
                    id: exercises_list_1
                    orientation: 'vertical'
                    pos_hint: {'center_x': .5, 'center_y': .45}
                    size_hint: .9, .63
                    anchor_x: 'center'
                    anchor_y: 'top'
                    canvas.before:
                        Color:
                            rgba:1,0,0,0
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    RecycleView:
                        id: exercises_plan_1
                        viewclass: 'SetExercisePlan'
                        RecycleBoxLayout:
                            padding_x: dp(22)
                            spacing: dp(8)
                            default_size: None, dp(70)
                            default_size_hint: 1, None
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: 'vertical'
                MDTextButton:
                    id: add_exercises_post_1
                    text: "Add Exercises"
                    font_name: "Poppins-SemiBold.ttf"
                    font_size: 14
                    text_size: None, self.height
                    color: 105/255, 0, 188/255, 1 
                    pos_hint:{'center_x': 2.5, 'center_y': 2.45}
                    on_release:
                        root.manager.current = "exercise_list"
            #screen for day 2, essentially the same as day 1, just for the transition animation left to right or opposite
            MDScreen:
                name: 'empty_plan_day_2'
                md_bg_color: get_color_from_hex("#0a0a0a")
                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: .95, .1
                    pos_hint: {'center_x': 0.525, 'center_y': 0.835}
                    MDLabel:
                        id: title_2
                        text: "Day 1"
                        color: 1, 1, 1, 1
                        font_size: 27
                        font_name: "Poppins-SemiBold"
                        halign: 'left'
                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: .95, .1
                    pos_hint: {'center_x': 0.53, 'center_y': 0.785}
                    MDLabel:
                        id: subtitle_2
                        text: "Day 1"
                        color: 1, 1, 1, .7
                        font_size: 18
                        font_name: "Poppins-Medium"
                        halign: 'left'
                MDFloatLayout:
                    id: add_exercise_btn_2
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    RoundedRectangle2:
                        id: border_2
                        color: 1, 1, 1, 1
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: 18
                        size_hint: .509, .077
                        pos_hint: {'center_x': .3,'center_y': .7}
                        radius: [10,]
                        canvas.before:
                            RoundedRectangle:
                                texture: Gradient.horizontal(get_color_from_hex("0B004A"), get_color_from_hex("550038"))
                                pos: self.pos
                                size: self.size
                                radius: [10,]
                    RoundedRectangle2:
                        id: add_exercise_txt_2
                        text: "Add Exercises"
                        color: 1, 1, 1, 1
                        font_name: "Poppins-SemiBold.ttf"
                        font_size: 18
                        size_hint: .5, .07
                        on_release: root.manager.current = "exercise_list"
                        pos_hint: {'center_x': .3,'center_y': .7} #.7
                        radius: [10,]
                        btn_color: get_color_from_hex("0D0F13")
                        btn_color_down: get_color_from_hex("050608")
                    MDIcon:
                        id: add_exercise_icon_2
                        icon: "plus-thick"
                        color: 1, 1, 1, 1
                        font_size: 22
                        pos_hint: {'center_x': .14,'center_y': .7}   #.7
                    RoundedRectangle2:
                        id: dots_rec_2
                        size_hint: .11, .045
                        btn_color: get_color_from_hex("0D0F13")
                        pos_hint: {'center_x': 0.3, 'center_y': 0.835}
                        radius: [10,]
                    MDIcon:
                        id: dots_2
                        icon: "dots-horizontal"
                        color: 1, 1, 1, 1
                        font_size: 45
                        pos_hint: {'center_x': 0.3, 'center_y': 0.835}
                        icon_color: get_color_from_hex("#5E5E5E")
                AnchorLayout:
                    id: exercises_list_2
                    orientation: 'vertical'
                    pos_hint: {'center_x': .5, 'center_y': .45}
                    size_hint: .9, .63
                    anchor_x: 'center'
                    anchor_y: 'top'
                    canvas.before:
                        Color:
                            rgba:1,0,0,0
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    RecycleView:
                        id: exercises_plan_2
                        viewclass: 'SetExercisePlan'
                        RecycleBoxLayout:
                            padding_x: dp(22)
                            spacing: dp(8)
                            default_size: None, dp(70)
                            default_size_hint: 1, None
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: 'vertical'
                MDTextButton:
                    id: add_exercises_post_2
                    text: "Add Exercises"
                    font_name: "Poppins-SemiBold.ttf"
                    font_size: 14
                    text_size: None, self.height
                    color: 105/255, 0, 188/255, 1 
                    pos_hint:{'center_x': 2.5, 'center_y': 2.45}
                    on_release:
                        root.change_screen()
        #the days that you can click at the top of the screen, they're responsible for switching between days
        FloatLayout:
            orientation: 'horizontal'
            size_hint: .92, .1
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            spacing: 10
            RoundedRectangle2:
                id: selected_day_rec
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: .05, .1
                radius: [12,]
                btn_color: 1, 1, 1, 0.045
                btn_color_down: 1, 1, 1, 0.045
        MDBoxLayout:
            id: days_in_plan
            orientation: 'horizontal'
            size_hint: .9, .1
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            spacing: 10
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 0
                Rectangle:
                    size: self.size
                    pos: self.pos
        MDBoxLayout:
            id: invisible_rect
            orientation: 'horizontal'
            size_hint: .9, .1
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            spacing: 10
        MDTextButton:
            text: "Back"
            pos_hint: {"top" : 0.97, "x" : 0.06}
            on_release: 
                app.root.get_screen('select_workout').populate_workout()
                root.manager.current = "select_workout"
            font_name: "Poppins-SemiBold.ttf"
            font_size: 13
            color: 105/255, 0, 188/255, 1
        MDTextButton:
            text: "Save"
            pos_hint: {"top" : 0.97, "x" : 0.85}
            on_release: 
                root.toggle_save_panel()
                save_panel.toggle()
            font_name: "Poppins-SemiBold.ttf"
            font_size: 13
            color: 105/255, 0, 188/255, 1
        RoundedRectangle2:
            id: behind_panel_rec
            size_hint: 1, 1
            pos_hint: {'center_x': 2, 'center_y': 2}
            btn_color: 0, 0, 0, 0.2
            btn_color_down: 0, 0, 0, 0.2
            on_release: 
                save_panel.toggle()
                root.toggle_save_panel()

        DraggablePanel:
            id: save_panel
            size_hint: 1, None
            height: dp(330)
            open_position: dp(330)
            closed_position: 0
            start_hidden: True
            LimitTextInput2:
                id: plan_name
                size_hint: 0.9, 0.08
                pos_hint: {'center_x': 0.5, 'center_y': 0.85}
                multiline: False
                background_color: 0, 0, 0, 0
                foreground_color: 1, 1, 1, 1
                cursor_color: 1, 1, 1, 1
                font_name: 'Poppins-SemiBold.ttf'
                text: "New Plan"
                font_size: 20
                padding: 7, 0, 0, 0
                on_text: 
                    self.readonly = True if len(self.text.strip()) == 12 else False
            RoundedRectangle2:
                id: cancel_btn
                size_hint: 0.17, 0.07
                pos_hint: {'center_x': 0.68, 'center_y': 0.85}
                btn_color: get_color_from_hex("575757")
                btn_color_down: get_color_from_hex("2D2D2D")
                radius: [10,]
                text: "Cancel"
                on_release: 
                    save_panel.toggle()
                    root.toggle_save_panel()
                font_name: 'Poppins-Bold.ttf'
                font_size: 17
                color: 0 , 0 , 0 , 1
            RoundedRectangle2:
                id: save_btn
                size_hint: 0.17, 0.07
                pos_hint: {'center_x': 0.86, 'center_y': 0.85}
                btn_color: 1, 1, 1, 1
                btn_color_down: get_color_from_hex("BBBBBB")
                radius: [10,]
                text: "Save"
                on_release: 
                    root.save_plan()
                    save_panel.toggle()
                    root.toggle_save_panel()
                font_name: 'Poppins-Bold.ttf'
                color: 0 , 0 , 0 , 1
                font_size: 17
            AnchorLayout:
                id: plan_items_container
                anchor_x: 'center'
                anchor_y: 'top'  # Anchors the list to start from the top
                pos: self.parent.pos
                size_hint: 1, None
                height: dp(260)
                canvas.before:
                    Color:
                        rgba: 0.2, 0.8, 0.4, 0
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [0,]    
                MDBoxLayout:
                    id: items_box
                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                    orientation: "vertical"
                    size_hint_y: None
                    height: dp(35)
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.4, 0
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [0,] 

<LogWorkout>:
    name: "logworkout"
    canvas.before:
        Color:
            rgba: get_color_from_hex("131313")
        Rectangle:
            size: self.size
            pos: self.pos
    ScreenManager:
        id : logworkout_sm
        transition: SlideTransition()
        MDScreen:
            name: "logworkout_scr_1"
            MDFloatLayout:
                id: log_sets_layout_1
                pos_hint: {'center_x': 0.5,'center_y': 0.5}
                size_hint: 1,1 
            FirstRow:
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 0.8, .04
                pos_hint: {'center_x': 0.47, 'center_y': 0.82}
                MDTextButton:
                    id: exercise_name_1
                    text: ""
                    font_name: 'Poppins-SemiBold.ttf'
                    font_size: 20
                    color: get_color_from_hex("6900BC")
                    on_release: 
                        root.manager.transition = TransitionBase() 
                        app.root.get_screen('exercise_list').show_exercise_guide(self.text)
                        root.manager.current = "exercise_list"
            RoundedRectangle2:
                id: dots_rec_1
                size_hint: .1, .042
                btn_color: get_color_from_hex("242424")
                btn_color_down: get_color_from_hex("212121")
                pos_hint: {'center_x': 0.48, 'center_y': 0.82}
                radius: [10,]
                on_release: 
                    remove_exercise.toggle()
                    behind_panel_rec2.pos_hint = {'center_x': 0.5, 'center_y': 0.5}
            MDIcon:
                id: dots_1
                icon: "dots-horizontal"
                color: 1, 1, 1, 1
                font_size: 40
                pos_hint: {'center_x': 0.48, 'center_y': 0.82}
                icon_color: get_color_from_hex("#5E5E5E")

        MDScreen:
            name: "logworkout_scr_2"
            MDFloatLayout:
                id: log_sets_layout_2
                pos_hint: {'center_x': 0.5,'center_y': 0.5}
                size_hint: 1,1
            FirstRow:
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 0.8, .04
                pos_hint: {'center_x': 0.47, 'center_y': 0.82}
                MDTextButton:
                    id: exercise_name_2
                    text: ""
                    font_name: 'Poppins-SemiBold.ttf'
                    font_size: 20
                    color: get_color_from_hex("6900BC")
                    on_release: 
                        root.manager.transition = TransitionBase() 
                        app.root.get_screen('exercise_list').show_exercise_guide(self.text)
                        root.manager.current = "exercise_list"
            RoundedRectangle2:
                id: dots_rec_2
                size_hint: .1, .042
                btn_color: get_color_from_hex("242424")
                btn_color_down: get_color_from_hex("212121")
                pos_hint: {'center_x': 0.48, 'center_y': 0.82}
                radius: [10,]
                on_release: 
                    remove_exercise.toggle()
                    behind_panel_rec2.pos_hint = {'center_x': 0.5, 'center_y': 0.5}
            MDIcon:
                id: dots_2
                icon: "dots-horizontal"
                color: 1, 1, 1, 1
                font_size: 40
                pos_hint: {'center_x': 0.48, 'center_y': 0.82}
                icon_color: get_color_from_hex("#5E5E5E")

    MDCard:
        size_hint: .95, .08
        pos_hint: {'center_x': 0.5, 'center_y': 0.9}
        radius: [15,]
        md_bg_color: get_color_from_hex("262626")
    ScrollView:
        id: sv
        do_scroll_x: True
        do_scroll_y: False
        bar_width: '0dp'
        size_hint: .915, .09
        pos_hint: {'center_x': 0.5, 'center_y': 0.9}
        BoxLayout:
            id: bl
            size_hint_x: None
            width: self.minimum_width
            orientation: 'horizontal'
            spacing: dp(5)
    MDTextButton:
        id: back_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        color: get_color_from_hex("9300ED")
        pos_hint: {"top" : 0.98, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current= "select_workout"
            root.on_back()
    ChooseItem:
        id: choose_item
        type: "reps"
        size_hint: 1,1
        pos_hint: {'center_x': 2.5,'center_y': 0.5}
    RoundedRectangle2:
        id: behind_panel_rec
        size_hint: 1, 1
        pos_hint: {'center_x': 2, 'center_y': 2.5}
        btn_color: 0, 0, 0, 0.4
        btn_color_down: 0, 0, 0, 0.4
        on_release: 
            self.pos_hint = {'center_x': 2, 'center_y': 2}
            change_sets.toggle()
    RoundedRectangle2:
        id: behind_panel_rec2
        size_hint: 1, 1
        pos_hint: {'center_x': 2, 'center_y': 2.5}
        btn_color: 0, 0, 0, 0.4
        btn_color_down: 0, 0, 0, 0.4
        on_release: 
            self.pos_hint = {'center_x': 2, 'center_y': 2}
            remove_exercise.toggle()
    RoundedRectangle2:
        id: behind_panel_rec3
        size_hint: 1, 1
        pos_hint: {'center_x': 2, 'center_y': 2.5}
        btn_color: 0, 0, 0, 0.4
        btn_color_down: 0, 0, 0, 0.4
        on_release: 
            self.pos_hint = {'center_x': 2, 'center_y': 2}
            save_workout_panel.toggle()
    DraggablePanel:
        id: change_sets
        size_hint: 1, None
        height: dp(150)
        open_position: dp(150)
        closed_position: 0
        start_hidden: True
        canvas.before:
            Color:
                rgba: get_color_from_hex("2B2B2B")
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [15,]
        MDLabel:
            text: "Sets"
            color: 1, 1, 1, 1
            font_name: 'Poppins-Medium.ttf'
            font_size: 20
            pos: change_sets.x + 205, change_sets.y +60
        MDLabel:
            id: set_label
            text: "12"
            color: 1, 1, 1, 1
            font_name: 'Poppins-Bold.ttf'
            font_size: 80
            pos: change_sets.x + 202 if len(self.text) == 1 else change_sets.x + 190, change_sets.y -5
        MDIconButton:
            icon: "plus-thick"
            icon_color: get_color_from_hex("ffffff")
            theme_text_color: "Custom"
            icon_size: 60
            pos: change_sets.x + 280, change_sets.y + 40
            on_release:root.add_set()
        MDIconButton:
            icon: "minus-thick"
            theme_text_color: "Custom"
            icon_color: get_color_from_hex("ffffff")
            icon_size: 60
            pos: change_sets.x + 80, change_sets.y + 40
            on_release: root.remove_set()
    DraggablePanel:
        id: remove_exercise
        size_hint: 1, None
        height: dp(150)
        open_position: dp(150)
        closed_position: 0
        start_hidden: True
        canvas.before:
            Color:
                rgba: get_color_from_hex("2B2B2B")
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [15,]
        RoundedRectangle2:
            size_hint: .9, .5
            pos: remove_exercise.x+25, remove_exercise.y+50
            btn_color: get_color_from_hex("222222")
            btn_color_down: get_color_from_hex("202020")
            radius: [25,]
            on_release:
                behind_panel_rec2.pos_hint = {'center_x': 2.5, 'center_y': 2.5}
                root.remove_exercise()
                remove_exercise.toggle()
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: .9, .5
            pos: remove_exercise.x+25, remove_exercise.y+50
            MDIconButton:
                icon: "trash-can-outline"
                icon_color: get_color_from_hex("ffffff")
                theme_text_color: "Custom"
                icon_size: 40
                padding: 0, 0, 0, 20
            MDLabel:
                text: "  Remove Exercise"
                color: 1, 1, 1, 1
                font_name: 'Poppins-SemiBold.ttf'
                font_size: 20
    DraggablePanel:
        id: save_workout_panel
        size_hint: 1, None
        height: dp(70)
        open_position: dp(70)
        closed_position: 0
        start_hidden: True
        canvas.before:
            Color:
                rgba: get_color_from_hex("161616")
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [12,]
        RoundedRectangle2:
            size_hint: .96, .7
            pos: save_workout_panel.x+10, save_workout_panel.y+10
            btn_color: get_color_from_hex("6900BC")
            btn_color_down: get_color_from_hex("00C070")
            radius: [15,]
            on_release:
                behind_panel_rec3.pos_hint = {'center_x': 2.5, 'center_y': 2.5}
                root.save_workout()
                save_workout_panel.toggle()
                root.manager.current = "dashboard"
                app.root.get_screen('dashboard').get_calories_from_database(dt=None)
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: .9, .5
            pos: save_workout_panel.x+80, save_workout_panel.y+20
            MDIconButton:
                icon: "star-four-points-small"
                icon_color: get_color_from_hex("ffffff")
                theme_text_color: "Custom"
                icon_size: 50
                padding: 30, 35, 0, 0
            MDLabel:
                text: "Complete Workout"
                color: 1, 1, 1, 1
                font_name: 'Poppins-ExtraBold.ttf'
                font_size: 15
                padding: 0, 0,20, 0
<InputTrainingFrequency>
    name: "inputtrainingfrequency"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "dashboard"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "initialpage"
    BoxLayout:
        id:boxlayout_6
        orientation: "vertical"
        size_hint: .885, .075
        pos_hint: {"center_x": .498, "center_y": 0.77}
        Label:
            id: trainingfrequency
            text: "How many days per week do you want to train?"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            font_size: 22
            halign:"left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            #: set pressed_1xweek False
            #: set pressed_2xweek False
            #: set pressed_3xweek False
            #: set pressed_4xweek False
            #: set pressed_5xweek False
            #: set pressed_6xweek False
            #: set pressed_7xweek False
    Border:
        id: border 
        size_hint: .906, .063
        pos_hint: {"center_x": 0.498, "center_y": 2}
    DarkRoundedRectangle:
        id: rectangle_1
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.68}
        on_state:
            if self.state == 'down': root.border_on_click(True, False, False, False, False, False, False)
    DarkRoundedRectangle:
        id: rectangle_2
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.61}
        on_state:
            if self.state == 'down': root.border_on_click(False, True, False, False, False, False, False)
    DarkRoundedRectangle:
        id: rectangle_3
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.54}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, True, False, False, False, False)
    DarkRoundedRectangle:
        id: rectangle_4
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.47}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, True, False, False, False)
    DarkRoundedRectangle:
        id: rectangle_5
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.4}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, False, True, False, False)
    DarkRoundedRectangle:
        id: rectangle_6
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.33}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, False, False, True, False)
    DarkRoundedRectangle:
        id: rectangle_7
        size_hint: .9, .06
        pos_hint: {"center_x": 0.498, "center_y": 0.26}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, False, False, False, False, True)
    GridLayout:
        cols: 2
        rows: 7
        size_hint: .9, .48
        pos_hint: {"center_x": 0.498, "center_y": 0.47}
        padding: 10,0
        spacing: 7
        Label:
            id: 1xweek
            text: "1x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 1xinfo
            text: "Not Recommended"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 2xweek
            text: "2x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 2xinfo
            text: "Time Efficient"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 3xweek
            text: "3x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 3xinfo
            text: "Good"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 4xweek
            text: "4x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 4xinfo
            text: "Recommended"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 5xweek
            text: "5x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 5xinfo
            text: "Optimal"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 6xweek
            text: "6x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 6xinfo
            text: "Optimal"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size            
        Label:
            id: 7xweek
            text: "7x week"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: 7xinfo
            text: "Time Consuming"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"right"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    Label:
        id: validtrainingfrequency
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.115}
    ContinueButton:
        id: continuebutton_trainingfrequency
        size_hint: .9, .085
        pos_hint: {"center_x": 0.498, "center_y": 0.175}
        on_release:
            root.on_continue()
            if root.invalidtrainingfrequency == False: root.manager.current = "inputtrainingstyle"
            else: root.manager.current = "inputtrainingfrequency"
    Label:
        id: continue_trainingfrequency
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.175}
        
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}

<PrioritizeMuscleGroups>:
    name: "prioritizemusclegroups"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputtrainingstyle"
    MDTextButton:
        id: txt_btn
        text: "Skip"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.87}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "dashboard"
    BoxLayout:
        id:boxlayout_8
        orientation: "vertical"
        size_hint: .885, .13
        pos_hint: {"center_x": .5, "center_y": 0.857}
        Label:
            id: prioritizemusclegroups
            text: "Do you have any muscle groups that you want to prioritize? (Select up to 3)"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            font_size: 20
            halign:"left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size

    Border:
        id: border_1
        size_hint: .436, .077
        pos_hint: {"center_x": 0.27, "center_y":2}
    Border:
        id: border_2 
        size_hint: .436, .077
        pos_hint: {"center_x": 0.27, "center_y": 2}
    Border:
        id: border_3
        size_hint: .436, .077
        pos_hint: {"center_x": 0.27, "center_y": 2}
    Border:
        id: border_general
        size_hint: .897, .057
        pos_hint: {"center_x": 0.5, "center_y": 2}  #
    SelectableRectangle:
        id: rectangle_chest
        size_hint: .43, .075
        pos_hint: {"center_x": 0.27, "center_y": 0.76}
    Label:
        id: chest
        text: "CHEST"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.27, "center_y": 0.76}

    SelectableRectangle:
        id: rectangle_shoulders
        size_hint: .43, .075
        pos_hint: {"center_x": 0.27, "center_y": 0.675}
    Label:
        id: shoulders
        text: "SHOULDERS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.27, "center_y": 0.675}

    SelectableRectangle:
        id: rectangle_upperback
        size_hint: .43, .075
        pos_hint: {"center_x": 0.27, "center_y": 0.59}
    Label:
        id: upperback
        text: "UPPER BACK"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.27, "center_y": 0.59}

    SelectableRectangle:
        id: rectangle_lats
        size_hint: .43, .075
        pos_hint: {"center_x": 0.27, "center_y": 0.505}
    Label:
        id: lats
        text: "LATS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.27, "center_y": 0.505}

    SelectableRectangle:
        id: rectangle_triceps
        size_hint: .43, .075
        pos_hint: {"center_x": 0.27, "center_y": 0.42}
    Label:
        id: triceps
        text: "TRICEPS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        halign:"left"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.27, "center_y": 0.42}

    SelectableRectangle:
        id: rectangle_biceps
        size_hint: .43, .075
        pos_hint: {"center_x": 0.27, "center_y": 0.335}
    Label:
        id: biceps
        text: "BICEPS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        halign:"left"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.27, "center_y": 0.335}

    SelectableRectangle:
        id: rectangle_quads
        size_hint: .43, .075
        pos_hint: {"center_x": 0.73, "center_y": 0.76}
    Label:
        id: quads
        text: "QUADS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        halign:"right"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1]
        pos_hint: {"center_x": 0.73, "center_y": 0.76}

    SelectableRectangle:
        id: rectangle_glutes
        size_hint: .43, .075
        pos_hint: {"center_x": 0.73, "center_y": 0.675}
    Label:
        id: glutes
        text: "GLUTES"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        halign:"right"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1] 
        pos_hint: {"center_x": 0.73, "center_y": 0.675}

    SelectableRectangle:
        id: rectangle_hamstrings
        size_hint: .43, .075
        pos_hint: {"center_x": 0.73, "center_y": 0.59}
    Label:
        id: hamstrings
        text: "HAMSTRINGS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        halign:"right"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1] 
        pos_hint: {"center_x": 0.73, "center_y": 0.59}

    SelectableRectangle:
        id: rectangle_calves
        size_hint: .43, .075
        pos_hint: {"center_x": 0.73, "center_y": 0.505}
    Label:
        id: calves
        text: "CALVES"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        halign:"right"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1] 
        pos_hint: {"center_x": 0.73, "center_y": 0.505}

    SelectableRectangle:
        id: rectangle_abs
        size_hint: .43, .075
        pos_hint: {"center_x": 0.73, "center_y": 0.42}
    Label:    
        id: abs
        text: "ABS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        halign:"right"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1] 
        pos_hint: {"center_x": 0.73, "center_y": 0.42}

    SelectableRectangle:
        id: rectangle_forearms
        size_hint: .43, .075
        pos_hint: {"center_x": 0.73, "center_y": 0.335}
    Label:
        id: forearms
        text: "FOREARMS"
        color: 1, 1, 1, 1
        font_name: "Poppins-Black.ttf"
        halign:"right"
        valign: 'middle'
        font_size: 18
        width: self.texture_size[0]
        height: self.texture_size[1] 
        pos_hint: {"center_x": 0.73, "center_y": 0.335}

    SelectableRectangle:
        id: rectangle_general
        size_hint: .894, .055
        pos_hint: {"center_x": 0.5, "center_y": 0.26}
        on_release: root.border_on_click(self, is_general_option=True)
        
    Label:
        text: "I don't want to prioritize any muscle groups"
        color: 1, 1, 1, 1
        font_name: "Poppins-Bold.ttf"
        valign: 'middle'
        font_size: 16
        width: self.texture_size[0]
        height: self.texture_size[1] 
        pos_hint: {"center_x": 0.5, "center_y": 0.26}
    LightButton:
        id: continuebutton_prioritizemusclegroups
        size_hint: .894, .085
        pos_hint: {"center_x": 0.498, "center_y": 0.18}
        on_release:
            root.changescreen()
    Label:
        id: continue_prioritizemusclegroups
        text: "Done!"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.18}
    Label:
        id: validmusclegroups
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.115}

<InputTrainingStyle>
    name: "inputtrainingstyle"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "inputequipment"
    BoxLayout:
        id:boxlayout_5
        orientation: "vertical"
        size_hint: .885, .075
        pos_hint: {"center_x": .498, "center_y": 0.785}
        Label:
            id: trainingstyle
            text: "What do you want to train for?"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            font_size: 22
            halign:"left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
            #: set pressed_hypertrophy False
            #: set pressed_powerlifting False
            #: set pressed_powerbuilding False
    Border:
        id: border 
        size_hint: .906, .143
        pos_hint: {"center_x": 0.498, "center_y": 2}

    SelectableRectangle:
        id: hypertrophy_box
        size_hint: .9, .14
        pos_hint: {"center_x": 0.498, "center_y": 0.68}
        on_state:
            if self.state == 'down': root.border_on_click(True, False, False)
    DarkRoundedRectangle:
        id: powerlifting_box
        size_hint: .9, .14
        pos_hint: {"center_x": 0.498, "center_y": 0.53}
        on_state:
            if self.state == 'down': root.border_on_click(False, True, False)
    DarkRoundedRectangle:
        id: powerbuilding_box
        size_hint: .9, .14
        pos_hint: {"center_x": 0.498, "center_y": 0.38}
        on_state:
            if self.state == 'down': root.border_on_click(False, False, True)
    BoxLayout:
        orientation: "vertical"
        size_hint: .9, .44
        pos_hint: {"center_x": 0.498, "center_y": 0.56}
        padding: 100,0
        canvas.before:
        Label:
            id: hypertrophy
            text: "Hypertrophy"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: powerlifting
            text: "Powerlifting"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: powerbuilding
            text: "Powerbuilding"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 18
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    Image:
        id: hypertrophy_icon
        source: "hypertrophy.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": 0.15, "center_y": 0.68}
    Image:
        id: powerlifting_icon
        source: "powerlifting.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": 0.15, "center_y": 0.53}
    Image:
        id: powerbuilding_icon
        source: "powerbuilding.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": 0.15, "center_y": 0.38}
    BoxLayout:
        orientation: "vertical"
        size_hint: .65, .44
        pos_hint: {"center_x": 0.582, "center_y": 0.525}
        padding: 7,0
        Label:
            id: hypertrophy_subtitle
            text: "I want to focus on building the most amount of muscle in the shortest time possible"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 9
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: powerlifting_subtitle
            text: "I want to focus into building the most amount of strength in lifts like Bench Press, Squats and Deadlifts"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 9
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
        Label:
            id: powerbuilding_subtitle
            text: "I want to build muscle while building strength at the same time"
            color: 1, 1, 1, .4
            font_name: "Poppins-Regular.ttf"
            halign:"left"
            valign: 'middle'
            font_size: 9
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    Label:
        id: validtrainingstyle
        text: ""
        color: 1, 1, 1, 1
        font_name: "Poppins-Regular.ttf"
        font_size: 16
        pos_hint: {"center_x": 0.50, "center_y": 0.19}
    ContinueButton:
        id: continuebutton_trainingstyle
        pos_hint: {"center_x": 0.498, "center_y": 0.25}
        on_release:
            root.on_continue()
            if root.invalidtrainingstyle == False: root.manager.current = "prioritizemusclegroups"
            else: root.manager.current = "inputtrainingstyle"
    Label:
        id: continue_trainingstyle
        text: "Continue"
        color: 1, 1, 1, 1 
        font_name: "Poppins-Bold.ttf"
        font_size: 22
        pos_hint: {"center_x": 0.498, "center_y": 0.25}
    Image:
        id: app_logo
        source: "Fitfuel.png"
        size_hint: None, None
        size: 95,95
        pos_hint: {"center_x": .498, "center_y": 0.05}
<GeneratePlan>:
    name: "generate_plan"
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            size: self.size
            pos: self.pos

    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, .7
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        canvas.before:
            Color:
                rgba: 1, 0, 0, 0
            Rectangle:
                size: self.size
                pos: self.pos

        MDCard:
            orientation: "vertical"
            size_hint: None, None
            height: dp(450)
            width: dp(330)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            radius: [dp(15),]
            md_bg_color: 18/255, 18/255, 18/255, 1
    BoxLayout:
        orientation: 'vertical'
        size_hint: .9, .7
        pos_hint: {'center_x': 0.5, 'center_y': 0.54}
        BoxLayout:
            size_hint: .85, .7
            pos_hint: {'center_x': 0.482, 'center_y': 0.95}
            Label:
                id: day_plan
                text: "DAY 1"
                font_size: 20
                font_name: "Poppins-Black.ttf"
                halign: "left"
                valign: 'middle'
                size_hint: self.size_hint_x, None
                width: self.texture_size[0]
                height: self.texture_size[1]
                text_size: self.size
                spacing: dp(10)
        AnchorLayout:
            anchor_y: 'top'
            size_hint: .9, 3.7
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            RecycleView:
                id: exercise_list
                viewclass: 'SwipeToDeleteItem' 
                RecycleBoxLayout:
                    default_size: None, dp(56)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'
                    spacing: dp(6)


    BoxLayout:
        id:boxlayout_6
        orientation: "vertical"
        size_hint: .885, .075
        pos_hint: {"center_x": .498, "center_y": 0.9}
        Label:
            id: trainingfrequency
            text: "Custom Workout Plan"
            color: 1, 1, 1, 1
            font_name: "Poppins-Bold.ttf"
            font_size: 27
            halign:"left"
            valign: 'middle'
            width: self.texture_size[0]
            height: self.texture_size[1]
            text_size: self.size
    BoxLayout:
        orientation: 'horizontal'
        size_hint: .4, .1
        pos_hint: {'center_x': 0.25, 'center_y': 0.1}
        spacing: dp(7)

        DarkRoundedRectangle:
            size_hint: .3, .7
            pos_hint: { "center_y": .5}
            btn_color: 14/255, 8/255, 58/255, 1
            btn_color_down: 14/255, 8/255, 58/255, 1
        DarkRoundedRectangle:
            size_hint: .3, .7
            pos_hint: { "center_y": .5}
            btn_color: 14/255, 8/255, 58/255, 1
            btn_color_down: 14/255, 8/255, 58/255, 1
    BoxLayout:
        orientation: 'horizontal'
        size_hint: .9, .1
        pos_hint: {'center_x': 0.52, 'center_y': 0.1}
        spacing: dp(10)
        MDIconButton:
            id: arrow_left
            icon: "arrow-left-bold"
            pos_hint: {"center_y": .5}
            icon_size: "38sp"
            on_release: root.switch_days_left()
        MDIconButton:
            id: arrow_right
            icon: "arrow-right-bold"
            pos_hint: {"center_y": .5}
            icon_size: "38sp"
            on_release: root.switch_days_right()
    ContinueButton:
        markup: True
        text: "[font=Poppins-Bold.ttf]Save[/font]"
        size_hint: .47, .074
        pos_hint:{'center_x': 0.7, 'center_y': 0.1}
        on_release: 
            root.save_plan()
            root.manager.current = "dashboard"
    MDTextButton:
        id: txt_btn
        text: "Back"
        font_name: "Poppins-SemiBold.ttf"
        font_size: 14
        text_size: None, self.height
        color: 105/255, 0, 188/255, 1 
        pos_hint: {"top" : 0.97, "x" : 0.06}
        on_release:
            root.manager.transition = TransitionBase()
            root.manager.current = "dashboard"
<ChatBotScreen>:
    bot_name: bot_name
    text_input: text_input
    chat_list: chat_list
    name: "chatbot"
    MDFloatLayout:
        canvas.before:
            Color:
                rgb: get_color_from_hex("#0C0A0A")
            Rectangle:
                size: self.width, self.height
                pos: self.pos
        MDFloatLayout:
            size_hint_y: 1
            pos_hint: {"center_y": 1}

            BoxLayout:
                id: card2
                size_hint: 1, .114
                pos_hint: {'center_x': 0.5, 'center_y': .45}
                orientation: "vertical"
                canvas.before:
                    Color:
                        rgba:get_color_from_hex("#141212")
                    Rectangle:
                        size: self.size
                        pos: self.pos

                MDCard:
                    md_bg_color: 0, 0, 0, 0  # make the card transparent
                    BoxLayout:
                        orientation: "vertical"
                        MDLabel:
                            id: bot_name
                            line_height: 0.8
                            text: "Your AI Coach"
                            height: self.texture_size[1]
                            font_size: 25
                            padding: "119dp", 20, 0, 0
                            color: 1, 1, 1, 1
                            halign:"left"
                            font_name: "Poppins-Bold"
                            width: self.texture_size[0]

                        MDLabel:
                            id: status
                            padding: "120dp", 0, 0, 18
                            text: "Online"
                            font_size: 16
                            color: get_color_from_hex("#6900BC")
                            halign:"left"
                            font_name: "Poppins-SemiBold"
                            width: self.texture_size[0]

            MDIconButton:
                icon: "arrow-left"
                pos_hint: {"center_x": .08, "center_y": .45}
                icon_size: "30sp"
                theme_icon_color: "Custom"
                icon_color: 1, 1, 1, 1
                on_release: 
                    root.rebuild_chat_history()
                    root.manager.current = "dashboard"
            Image:
                id: ai_image
                source: "aicoachicon.png"
                size_hint: .13, .13
                pos_hint: {"center_x": .235, "center_y": .45}
                keep_ratio: True
                allow_stretch: True
        ScrollView:
            size_hint_y: .77
            pos_hint: {"x": 0, "y": .116}
            do_scroll_x: False
            do_scroll_y: True
            canvas.before:

            BoxLayout:
                id: chat_list
                orientation: 'vertical'
                size: (root.width, root.height)
                height: self.minimum_height
                size_hint: None, None
                pos_hint: {'top': 10}
                cols: 1
                spacing: 5
        MDFloatLayout:
            size_hint:.98 , .11
            pos_hint: {"center_x": .5, "center_y": .06}
            canvas.before:
                Color:
                    rgb: get_color_from_hex("#191717")
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [12,]
            MDFloatLayout:
                size_hint: .8, .75
                pos_hint: {"center_x": .43, "center_y": .5}
                TextInput:
                    id: text_input
                    hint_text: "Message..."
                    size_hint: 1, None
                    pos_hint: {"center_x": .5, "center_y": .5}
                    font_size: "18sp"
                    height: self.minimum_height
                    multiline: False
                    cursor_color:1, 1, 1, 1
                    cursor_width: "2sp"
                    foreground_color:1, 1, 1, 1
                    background_color: 0,0,0,0
                    padding: 15
                    font_name: "Poppins"
            MDIconButton:
                icon: "send"
                pos_hint: {"center_x": .91, "center_y": .5}
                user_font_size: "18sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                md_bg_color: get_color_from_hex("#6900BC")
                on_release: root.send()
